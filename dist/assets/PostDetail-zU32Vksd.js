import{m as W,d as P,r as i,j as e,S as G,U as F,x as ee,c as te,a5 as se,i as R,L as q,H as ae,F as B}from"./index-BLGelJha.js";import{S as re}from"./SEOHead-DRQDryq-.js";import{g as J,c as le,T as ie}from"./comments-B1fU9ipL.js";import{M as C}from"./message-square-CqsfpOH1.js";import{C as ne}from"./check-circle-Cgg6WETx.js";import{A as oe}from"./alert-circle-DAGHkWUe.js";import{C as Q}from"./clock-DENE1lN6.js";import{S as H}from"./send-572GY7Hb.js";import{C as X}from"./calendar-BGPP3a9Y.js";import{S as ce}from"./square-pen-BAjxLPCL.js";import{T as de}from"./trash-2-BK_vNAcC.js";import{A as O}from"./arrow-left-DBncEDfI.js";import{E as U}from"./eye-CQZKzRnz.js";import{S as me}from"./share-2-BVZNNq44.js";import{T as xe}from"./tag-DP8EDF3i.js";import{P as ue}from"./play-BAFZP_ri.js";import{B as he}from"./book-open-D9lfve3O.js";import{V as ge}from"./video-B5lTJXUS.js";import{I as pe}from"./image-BvPyjX2X.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=W("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=W("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),je=({postId:x,postTitle:V,onCommentsChange:u})=>{const{user:t}=P(),[j,y]=i.useState([]),[T,L]=i.useState(!0),[N,D]=i.useState(!1),[v,w]=i.useState(!1),[k,S]=i.useState(null),[g,p]=i.useState({type:"",text:""}),[o,f]=i.useState({content:"",author_name:""});i.useEffect(()=>{I()},[x]);const I=async()=>{L(!0);try{console.log("ðŸ’¬ Loading comments for post ID:",x);const{data:a}=await J(x);a?(console.log("âœ… Comments loaded successfully:",a.length),y(a)):(console.log("âš ï¸ No comments data returned"),y([]))}catch(a){console.error("Error loading comments:",a),y([])}finally{L(!1)}},_=a=>{const{name:c,value:b}=a.target;f(m=>({...m,[c]:b})),g.text&&p({type:"",text:""})},M=()=>o.content.trim()?!t&&!o.author_name.trim()?(p({type:"error",text:"Ismingizni kiriting"}),!1):!0:(p({type:"error",text:"Kommentariya matni kiritilishi shart"}),!1),$=async a=>{if(a.preventDefault(),!!M()){D(!0),p({type:"",text:""});try{const c={post_id:x,content:o.content.trim(),author_name:t?void 0:o.author_name.trim(),parent_id:k||void 0},{data:b,error:m}=await le(c);m?p({type:"error",text:"Xatolik: "+m.message}):(p({type:"success",text:"Kommentariya muvaffaqiyatli qo'shildi va ko'rsatildi!"}),f({content:"",author_name:""}),w(!1),S(null),console.log("ðŸ”„ Reloading comments after successful creation..."),await I(),u?.())}catch{p({type:"error",text:"Xatolik yuz berdi. Qaytadan urinib ko'ring."})}finally{D(!1)}}},A=a=>{const c=new Date(a),m=(new Date().getTime()-c.getTime())/(1e3*60*60);return m<1?`${Math.floor(m*60)} daqiqa oldin`:m<24?`${Math.floor(m)} soat oldin`:c.toLocaleDateString("uz-UZ",{year:"numeric",month:"short",day:"numeric"})},E=({comment:a,isReply:c=!1})=>e.jsx("div",{className:`${c?"ml-12 mt-4":""} animate-fade-in`,children:e.jsxs("div",{className:"theme-bg-secondary rounded-xl p-4 hover:theme-shadow-md transition-all duration-200",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[a.author?.avatar_url?e.jsx("img",{src:a.author.avatar_url,alt:a.author.full_name,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-100 to-teal-100 dark:from-blue-900/50 dark:to-teal-900/50 rounded-full flex items-center justify-center",children:e.jsx(F,{size:16,className:"theme-accent"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold theme-text text-sm",children:a.author?.full_name||a.author_name||"Anonim"}),a.author?.role==="doctor"&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full font-bold",children:"Dr"}),a.author?.role==="admin"&&e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded-full font-bold",children:"Admin"}),!a.author&&e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:"Anonim"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs theme-text-muted",children:[e.jsx(X,{size:12}),e.jsx("span",{children:A(a.created_at)})]})]})]})}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"theme-text-secondary leading-relaxed",children:a.content})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[e.jsx(ie,{size:14}),e.jsx("span",{className:"text-xs",children:"Foydali"})]}),!c&&e.jsxs("button",{onClick:()=>S(a.id),className:"flex items-center space-x-1 text-gray-500 hover:text-green-600 dark:hover:text-green-400 transition-colors duration-200",children:[e.jsx(be,{size:14}),e.jsx("span",{className:"text-xs",children:"Javob berish"})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:[e.jsx(fe,{size:14}),e.jsx("span",{className:"text-xs",children:"Shikoyat"})]})]}),a.user_id===t?.id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:e.jsx(ce,{size:14})}),e.jsx("button",{className:"text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:e.jsx(de,{size:14})})]})]}),k===a.id&&e.jsx("div",{className:"mt-4 p-4 theme-bg-tertiary rounded-lg animate-slide-down",children:e.jsx("form",{onSubmit:$,children:e.jsxs("div",{className:"space-y-3",children:[!t&&e.jsx("input",{type:"text",name:"author_name",value:o.author_name,onChange:_,placeholder:"Ismingiz",required:!0,className:"w-full px-3 py-2 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 theme-bg theme-text text-sm"}),e.jsx("textarea",{name:"content",value:o.content,onChange:_,placeholder:"Javobingizni yozing...",required:!0,rows:3,className:"w-full px-3 py-2 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 theme-bg theme-text resize-none text-sm"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{type:"submit",disabled:N,className:"flex items-center space-x-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 text-sm",children:[e.jsx(H,{size:14}),e.jsx("span",{children:N?"Yuborilmoqda...":"Javob berish"})]}),e.jsx("button",{type:"button",onClick:()=>{S(null),f({content:"",author_name:""})},className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 px-4 py-2 rounded-lg transition-colors duration-200 text-sm",children:"Bekor qilish"})]})]})})}),a.replies&&a.replies.length>0&&e.jsx("div",{className:"mt-4",children:a.replies.map(b=>e.jsx(E,{comment:b,isReply:!0},b.id))})]})});return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-2xl font-bold theme-text flex items-center space-x-2",children:[e.jsx(C,{size:24,className:"theme-accent"}),e.jsxs("span",{children:["Kommentariyalar (",j.length,")"]})]}),e.jsxs("button",{onClick:()=>w(!v),className:"flex items-center space-x-2 theme-accent-bg text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(C,{size:16}),e.jsx("span",{children:"Kommentariya yozish"})]})]}),g.text&&e.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-center space-x-2 animate-slide-down ${g.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[g.type==="success"?e.jsx(ne,{size:20,className:"text-green-600 dark:text-green-400"}):e.jsx(oe,{size:20,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:g.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300",children:g.text})]}),v&&e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow-lg theme-border border p-6 mb-8 animate-slide-down",children:[e.jsx("h4",{className:"text-lg font-semibold theme-text mb-4",children:t?"Kommentariya qoldiring":"Anonim kommentariya"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[!t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Ismingiz *"}),e.jsx("input",{type:"text",name:"author_name",value:o.author_name,onChange:_,required:!0,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 theme-bg theme-text",placeholder:"Ismingizni kiriting"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Kommentariya *"}),e.jsx("textarea",{name:"content",value:o.content,onChange:_,required:!0,rows:4,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 theme-bg theme-text resize-none",placeholder:"Fikringizni bildiring..."}),e.jsxs("div",{className:"text-xs theme-text-muted mt-1",children:[o.content.length,"/500 belgi"]})]}),!t&&e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(Q,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Anonim kommentariyalar admin tasdiqlashidan so'ng ko'rsatiladi"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{type:"submit",disabled:N,className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50",children:[e.jsx(H,{size:16}),e.jsx("span",{children:N?"Yuborilmoqda...":"Yuborish"})]}),e.jsx("button",{type:"button",onClick:()=>{w(!1),f({content:"",author_name:""}),p({type:"",text:""})},className:"theme-border border theme-text-secondary px-6 py-3 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:"Bekor qilish"})]})]})]}),T?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"theme-text-muted",children:"Kommentariyalar yuklanmoqda..."})]}):j.length>0?e.jsx("div",{className:"space-y-6",children:j.map(a=>e.jsx(E,{comment:a},a.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{size:48,className:"theme-text-muted mx-auto mb-4 opacity-50"}),e.jsx("h4",{className:"text-lg font-semibold theme-text-secondary mb-2",children:"Hozircha kommentariyalar yo'q"}),e.jsx("p",{className:"theme-text-muted mb-6",children:"Birinchi bo'lib fikringizni bildiring!"}),e.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center space-x-2 theme-accent-bg text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(C,{size:16}),e.jsx("span",{children:"Birinchi kommentariya"})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-800 dark:text-blue-200",children:[e.jsx(G,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Kommentariyalar darhol ko'rsatiladi. Nomaqbul kommentariyalar admin tomonidan keyinchalik o'chirilishi mumkin."})]})})]})},Fe=()=>{const{slug:x}=ee(),{t:V,i18n:u}=te(),[t,j]=i.useState(null),[y,T]=i.useState([]),[L,N]=i.useState([]),[D,v]=i.useState(!0),[w,k]=i.useState(!1),[S,g]=i.useState(!0),[p,o]=i.useState(!0),[f,I]=i.useState(!1),[_,M]=i.useState("");i.useEffect(()=>{x&&(k(!1),$())},[x,u.language]),i.useEffect(()=>{t&&(E(),A())},[t,u.language]);const $=async()=>{if(x){v(!0);try{const s=`post_detail_${x}_${u.language}`,r=localStorage.getItem(s),n=localStorage.getItem(`${s}_timestamp`);if(r&&n&&!w&&Date.now()-parseInt(n)<300*1e3){const z=JSON.parse(r);j(z),k(!0),v(!1),console.log("ðŸ“¦ Using cached post detail data");return}const{data:l,error:d}=await se(x,u.language);d?M("Maqola topilmadi"):l&&(j(l),localStorage.setItem(s,JSON.stringify(l)),localStorage.setItem(`${s}_timestamp`,Date.now().toString()),k(!0))}catch{M("Xatolik yuz berdi")}finally{v(!1)}}},A=async()=>{if(t){o(!0);try{console.log("ðŸ’¬ Loading comments for post:",t.title);const{data:s}=await J(t.id);s&&(N(s),console.log("âœ… Comments loaded:",s.length))}catch(s){console.error("Error loading comments:",s)}finally{o(!1)}}},E=async()=>{if(t){g(!0);try{console.log("ðŸ” Loading related posts for:",t.title);const{data:s}=await R(u.language,{published:!0,category_id:t.category_id,limit:10});let r=[];if(s&&s.length>0&&(r=s.filter(l=>l.id!==t.id),console.log("âœ… Found posts from same category:",r.length)),r.length<3&&t.tags.length>0){const{data:l}=await R(u.language,{published:!0,limit:20});if(l){const d=l.filter(h=>h.id===t.id||r.find(K=>K.id===h.id)?!1:h.tags.filter(K=>t.tags.includes(K)).length>0);r=[...r,...d],console.log("âœ… Added posts with similar tags:",d.length)}}if(r.length<3&&t.author_id){const{data:l}=await R(u.language,{published:!0,author_id:t.author_id,limit:10});if(l){const d=l.filter(h=>!(h.id===t.id||r.find(z=>z.id===h.id)));r=[...r,...d],console.log("âœ… Added posts from same author:",d.length)}}if(r.length<3){const{data:l}=await R(u.language,{published:!0,limit:10});if(l){const d=l.filter(h=>!(h.id===t.id||r.find(z=>z.id===h.id)));r=[...r,...d],console.log("âœ… Added latest posts:",d.length)}}const n=r.slice(0,6);T(n),console.log("âœ… Final related posts:",n.length)}catch(s){console.error("Error loading related posts:",s),T([])}finally{g(!1)}}},a=s=>new Date(s).toLocaleDateString("uz-UZ",{year:"numeric",month:"long",day:"numeric"}),c=s=>s.youtube_url?ge:s.featured_image_url?pe:B,b=s=>s.youtube_url?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":s.featured_image_url?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",m=s=>s.youtube_url?"Video":s.featured_image_url?"Rasm":"Matn",Y=async()=>{if(navigator.share&&t)try{await navigator.share({title:t.title,text:t.excerpt,url:window.location.href})}catch{navigator.clipboard.writeText(window.location.href),alert("Havola nusxalandi!")}else navigator.clipboard.writeText(window.location.href),alert("Havola nusxalandi!")},Z=s=>s.split(`
`).map((r,n)=>r.startsWith("# ")?e.jsx("h1",{className:"text-3xl font-bold theme-text mb-4 mt-8",children:r.substring(2)},n):r.startsWith("## ")?e.jsx("h2",{className:"text-2xl font-bold theme-text mb-3 mt-6",children:r.substring(3)},n):r.startsWith("### ")?e.jsx("h3",{className:"text-xl font-bold theme-text mb-2 mt-4",children:r.substring(4)},n):r.startsWith("- ")?e.jsx("li",{className:"theme-text-secondary ml-4 mb-1",children:r.substring(2)},n):r.trim()===""?e.jsx("br",{},n):e.jsx("p",{className:"theme-text-secondary mb-4 leading-relaxed",children:r},n));return D?e.jsx("div",{className:"min-h-screen theme-bg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"theme-text-muted",children:"Maqola yuklanmoqda..."})]})}):_||!t?e.jsx("div",{className:"min-h-screen theme-bg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold theme-text mb-4",children:"Maqola topilmadi"}),e.jsx("p",{className:"theme-text-secondary mb-6",children:"Siz qidirayotgan maqola mavjud emas yoki o'chirilgan."}),e.jsxs(q,{to:"/posts",className:"inline-flex items-center space-x-2 theme-accent-bg text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(O,{size:20}),e.jsx("span",{children:"Maqolalarga qaytish"})]})]})}):e.jsxs("div",{className:"theme-bg min-h-screen",children:[e.jsx(re,{title:t.meta_title||t.title,description:t.meta_description||t.excerpt,keywords:t.tags.join(", "),image:t.featured_image_url,url:`https://revmohelp.uz/posts/${t.slug}`,type:"article",article:{author:t.author?.full_name,publishedTime:t.published_at||t.created_at,modifiedTime:t.updated_at,section:t.category?.name,tags:t.tags}}),e.jsxs("div",{className:"min-h-screen theme-bg",children:[e.jsx("div",{className:"theme-bg theme-shadow theme-border border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs(q,{to:"/posts",className:"inline-flex items-center space-x-2 theme-text-secondary hover:theme-accent transition-colors duration-200",children:[e.jsx(O,{size:20}),e.jsx("span",{children:"Maqolalarga qaytish"})]})})}),e.jsxs("article",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("header",{className:"mb-12 animate-fade-in",children:[t.category&&e.jsx("div",{className:"mb-6",children:e.jsx("span",{className:"inline-block px-4 py-2 rounded-full text-white text-sm font-medium",style:{backgroundColor:t.category.color},children:t.category.name})}),e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold theme-text mb-6 leading-tight",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-sm theme-text-muted",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{size:16}),e.jsx("span",{children:t.author?.full_name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{size:16}),e.jsx("span",{children:a(t.published_at||t.created_at)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{size:16}),e.jsxs("span",{children:[(t.views_count||0).toLocaleString()," ko'rishlar"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{size:16}),e.jsxs("span",{children:[Math.ceil(t.content.length/1e3)," daqiqa o'qish"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{size:16}),e.jsxs("span",{children:[L.length," kommentariya"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>I(!f),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all duration-200 ${f?"bg-red-100 text-red-600 dark:bg-red-900/20 dark:text-red-400":"theme-bg-tertiary theme-text-secondary hover:bg-red-50 dark:hover:bg-red-900/10"}`,children:[e.jsx(ae,{size:16,className:f?"fill-current":""}),e.jsx("span",{className:"text-sm",children:"Yoqdi"})]}),e.jsxs("button",{onClick:Y,className:"flex items-center space-x-2 theme-bg-tertiary theme-text-secondary px-4 py-2 rounded-lg hover:theme-bg-quaternary transition-colors duration-200",children:[e.jsx(me,{size:16}),e.jsx("span",{className:"text-sm",children:"Ulashish"})]})]})]}),t.featured_image_url&&e.jsx("div",{className:"mb-8 animate-zoom-in",children:e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-64 md:h-96 object-cover rounded-2xl theme-shadow-lg"})}),t.youtube_url&&e.jsx("div",{className:"mb-8 animate-zoom-in",children:e.jsx("div",{className:"relative w-full h-64 md:h-96 bg-gray-100 dark:bg-gray-800 rounded-2xl overflow-hidden",children:e.jsx("iframe",{src:t.youtube_url.replace("watch?v=","embed/"),title:t.title,className:"w-full h-full",allowFullScreen:!0})})})]}),e.jsx("div",{className:"prose prose-lg max-w-none theme-text animate-slide-up",children:Z(t.content)}),t.tags.length>0&&e.jsxs("div",{className:"mt-12 pt-8 theme-border border-t animate-fade-in",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(xe,{size:20,className:"theme-text-muted"}),e.jsx("h3",{className:"text-lg font-semibold theme-text",children:"Teglar"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.tags.map(s=>e.jsxs("span",{className:"px-4 py-2 theme-bg-tertiary theme-text-secondary rounded-lg hover:theme-bg-quaternary transition-colors duration-200 cursor-pointer",children:["#",s]},s))})]}),t.author&&e.jsx("div",{className:"mt-12 pt-8 theme-border border-t animate-fade-in",children:e.jsxs("div",{className:"flex items-center space-x-4 p-6 theme-bg-secondary rounded-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-100 to-teal-100 dark:from-blue-900/50 dark:to-teal-900/50 rounded-full flex items-center justify-center",children:e.jsx(F,{size:24,className:"theme-accent"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold theme-text",children:t.author.full_name}),e.jsx("p",{className:"theme-text-secondary capitalize",children:t.author.role}),e.jsx("p",{className:"theme-text-muted text-sm mt-1",children:"Professional tibbiy ma'lumotlar va maslahatlar"})]}),e.jsx(q,{to:`/doctors/${t.author.id}`,className:"theme-accent-bg text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Profil ko'rish"})]})}),e.jsxs("div",{className:"mt-16 animate-fade-in",children:[e.jsx("h3",{className:"text-2xl font-bold theme-text mb-8",children:"O'xshash Maqolalar"}),S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"theme-text-muted",children:"O'xshash maqolalar yuklanmoqda..."})]}):y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((s,r)=>{const n=c(s);return e.jsxs("article",{className:"theme-bg rounded-xl theme-shadow hover:theme-shadow-lg transition-all duration-300 theme-border border overflow-hidden transform hover:-translate-y-1 animate-fade-in",style:{animationDelay:`${r*100}ms`},children:[e.jsxs("div",{className:"relative h-40 overflow-hidden",children:[s.featured_image_url?e.jsx("img",{src:s.featured_image_url,alt:s.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",loading:"lazy"}):s.youtube_url?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:`https://img.youtube.com/vi/${s.youtube_url.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/maxresdefault.jpg`,alt:s.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",loading:"lazy",onError:l=>{const d=l.target;d.src=`https://img.youtube.com/vi/${s.youtube_url?.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/hqdefault.jpg`}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:e.jsx(ue,{size:16,className:"text-white ml-1"})})})]}):e.jsx("div",{className:"w-full h-full theme-bg-tertiary flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(n,{size:32,className:"theme-text-muted mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"theme-text-muted text-sm",children:"Matn Maqolasi"})]})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(s)}`,children:m(s)})}),s.category&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium text-white rounded-full",style:{backgroundColor:s.category.color},children:s.category.name})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-bold theme-text mb-2 line-clamp-2 hover:theme-accent transition-colors duration-200",children:e.jsx(q,{to:`/posts/${s.slug}`,children:s.title})}),e.jsx("p",{className:"theme-text-secondary text-sm mb-3 line-clamp-2 leading-relaxed",children:s.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-sm theme-text-muted mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(F,{size:12}),e.jsx("span",{className:"truncate max-w-24",children:s.author?.full_name})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(U,{size:12}),e.jsx("span",{className:"theme-accent font-medium",children:(s.views_count||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.tags.slice(0,2).map(l=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:["#",l]},l)),s.tags.length>2&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["+",s.tags.length-2]})]}),e.jsxs(q,{to:`/posts/${s.slug}`,className:"inline-flex items-center space-x-1 theme-accent hover:theme-accent-secondary font-medium transition-colors duration-200 text-sm",children:[e.jsx(he,{size:14}),e.jsx("span",{children:"Batafsil o'qish"})]})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{size:32,className:"theme-text-muted mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"theme-text-secondary",children:"O'xshash maqolalar topilmadi"})]})]})]}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mb-16",children:e.jsx(je,{postId:t.id,postTitle:t.title,onCommentsChange:A})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"animate-fade-in"})})]})]})};export{Fe as default};
