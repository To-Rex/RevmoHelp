import{c as S,d as C,r,i as T,j as e,L as m,F as p,w as M}from"./index-BLGelJha.js";import{S as L}from"./SEOHead-DRQDryq-.js";import{g as P,a as _,b as E}from"./postHelpers-nC-wjN_n.js";import{A as Q}from"./arrow-left-DBncEDfI.js";import{P as j}from"./plus-CUnlWIvg.js";import{C as $}from"./check-circle-Cgg6WETx.js";import{A as D}from"./alert-circle-DAGHkWUe.js";import{S as A}from"./search-CYc7FCtN.js";import{P as K}from"./play-BAFZP_ri.js";import{C as Y}from"./calendar-BGPP3a9Y.js";import{E as v}from"./eye-CQZKzRnz.js";import{C as B}from"./credit-card-bGC_Bchd.js";import{T as F}from"./trash-2-BK_vNAcC.js";import{T as O}from"./trending-up-CFisbs8W.js";import"./video-B5lTJXUS.js";import"./image-BvPyjX2X.js";const ne=()=>{const{t:X}=S(),{user:l}=C(),[n,N]=r.useState([]),[x,h]=r.useState(!0),[o,y]=r.useState(""),[i,w]=r.useState("all"),[u,g]=r.useState(null),[d,c]=r.useState({type:"",text:""});r.useEffect(()=>{l&&b()},[l]);const b=async()=>{if(l){h(!0);try{const{data:t}=await T("uz",{author_id:l.id});t&&N(t)}catch(t){console.error("Error loading posts:",t),c({type:"error",text:"Maqolalarni yuklashda xatolik"})}finally{h(!1)}}},k=async(t,a)=>{if(confirm(`"${a}" maqolasini o'chirishni xohlaysizmi?`)){g(t),c({type:"",text:""});try{const{error:s}=await M(t);s?c({type:"error",text:s.message}):(c({type:"success",text:"Maqola muvaffaqiyatli o'chirildi!"}),await b())}catch{c({type:"error",text:"Xatolik yuz berdi"})}finally{g(null)}}},f=n.filter(t=>{const a=t.title.toLowerCase().includes(o.toLowerCase())||t.excerpt.toLowerCase().includes(o.toLowerCase()),s=i==="all"||i==="published"&&t.published||i==="draft"&&!t.published;return a&&s}),q=t=>new Date(t).toLocaleDateString("uz-UZ",{year:"numeric",month:"short",day:"numeric"});return l?l.role!=="doctor"?e.jsx("div",{className:"min-h-screen theme-bg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold theme-text mb-4",children:"Ruxsat Yo'q"}),e.jsx("p",{className:"theme-text-secondary mb-6",children:"Bu sahifa faqat shifokorlar uchun."})]})}):x?e.jsx("div",{className:"min-h-screen theme-bg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"theme-text-muted",children:"Maqolalar yuklanmoqda..."})]})}):e.jsxs("div",{className:"min-h-screen theme-bg",children:[e.jsx(L,{title:"Mening Maqolalarim",description:"Shifokor maqolalarini boshqarish paneli",keywords:"shifokor maqolalar, tibbiy yozuvlar, maqola boshqaruvi",url:"https://revmohelp.uz/doctor/posts"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(m,{to:"/doctor-dashboard",className:"p-2 theme-text-secondary hover:theme-text rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(Q,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold theme-text",children:"Mening Maqolalarim"}),e.jsx("p",{className:"theme-text-secondary",children:"Tibbiy maqolalarni yaratish va boshqarish"})]})]}),e.jsxs(m,{to:"/doctor/posts/create",className:"flex items-center space-x-2 theme-accent-bg text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(j,{size:20}),e.jsx("span",{children:"Yangi Maqola"})]})]}),d.text&&e.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-center space-x-2 animate-slide-down ${d.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[d.type==="success"?e.jsx($,{size:20,className:"text-green-600"}):e.jsx(D,{size:20,className:"text-red-600"}),e.jsx("span",{className:d.type==="success"?"text-green-700":"text-red-700",children:d.text})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow theme-border border p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold theme-text mb-2",children:n.length}),e.jsx("div",{className:"text-sm theme-text-secondary",children:"Jami maqolalar"})]}),e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow theme-border border p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.filter(t=>t.published).length}),e.jsx("div",{className:"text-sm theme-text-secondary",children:"Nashr etilgan"})]}),e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow theme-border border p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.filter(t=>!t.published).length}),e.jsx("div",{className:"text-sm theme-text-secondary",children:"Qoralama"})]}),e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow theme-border border p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.reduce((t,a)=>t+(a.views_count||0),0).toLocaleString()}),e.jsx("div",{className:"text-sm theme-text-secondary",children:"Jami ko'rishlar"})]})]}),e.jsx("div",{className:"theme-bg rounded-xl theme-shadow theme-border border p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 theme-text-muted",size:20}),e.jsx("input",{type:"text",placeholder:"Maqolalarni qidiring...",value:o,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 theme-bg theme-text"})]})}),e.jsx("div",{className:"lg:w-48",children:e.jsxs("select",{value:i,onChange:t=>w(t.target.value),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 theme-bg theme-text",children:[e.jsx("option",{value:"all",children:"Barcha holatlar"}),e.jsx("option",{value:"published",children:"Nashr etilgan"}),e.jsx("option",{value:"draft",children:"Qoralama"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(t=>{const a=P(t);return e.jsxs("div",{className:"theme-bg rounded-2xl theme-shadow-lg theme-border border overflow-hidden hover:theme-shadow-xl transition-all duration-300 transform hover:-translate-y-2 group",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.featured_image_url?e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):t.youtube_url?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:`https://img.youtube.com/vi/${t.youtube_url.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/maxresdefault.jpg`,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:s=>{const z=s.target;z.src=`https://img.youtube.com/vi/${t.youtube_url?.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/hqdefault.jpg`}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center group-hover:bg-opacity-50 transition-all duration-300",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-xl animate-pulse group-hover:scale-110 transition-transform duration-300",children:e.jsx(K,{size:24,className:"text-white ml-1"})})})]}):e.jsx("div",{className:"w-full h-full theme-bg-tertiary flex items-center justify-center group-hover:theme-bg-quaternary transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(a,{size:48,className:"theme-text-muted mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsx("p",{className:"theme-text-muted text-sm font-medium",children:"Matn Maqolasi"})]})}),e.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:t.category&&e.jsx("span",{className:"px-3 py-1 text-xs font-semibold text-white rounded-full shadow-lg",style:{backgroundColor:t.category.color},children:t.category.name})}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${E(t)}`,children:_(t)}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${t.published?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:t.published?"Nashr etilgan":"Qoralama"})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold theme-text mb-3 line-clamp-2 group-hover:theme-accent transition-colors duration-300",children:t.title}),e.jsx("p",{className:"theme-text-secondary text-sm mb-4 line-clamp-3 leading-relaxed",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-sm theme-text-muted mb-4",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{size:14}),e.jsx("span",{children:q(t.created_at)})]})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(v,{size:14}),e.jsx("span",{className:"theme-accent font-medium",children:(t.views_count||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[t.tags.slice(0,2).map(s=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs rounded-full font-medium",children:["#",s]},s)),t.tags.length>2&&e.jsxs("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full font-medium",children:["+",t.tags.length-2]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t theme-border",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(m,{to:`/doctor/posts/edit/${t.id}`,className:"flex items-center space-x-1 theme-accent hover:text-blue-800 dark:hover:text-blue-300 p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900 transition-all duration-200 transform hover:scale-105",title:"Tahrirlash",children:[e.jsx(B,{size:16}),e.jsx("span",{className:"text-xs font-medium hidden sm:inline",children:"Tahrirlash"})]}),e.jsxs(m,{to:`/posts/${t.slug}`,target:"_blank",className:"flex items-center space-x-1 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900 transition-all duration-200 transform hover:scale-105",title:"Ko'rish",children:[e.jsx(v,{size:16}),e.jsx("span",{className:"text-xs font-medium hidden sm:inline",children:"Ko'rish"})]}),e.jsx("button",{onClick:()=>k(t.id,t.title),disabled:u===t.id,className:"flex items-center space-x-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none",title:"O'chirish",children:u===t.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):e.jsxs(e.Fragment,{children:[e.jsx(F,{size:16}),e.jsx("span",{className:"text-xs font-medium hidden sm:inline",children:"O'chirish"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs theme-text-muted",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(O,{size:10}),e.jsxs("span",{children:[t.tags.length," teg"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{size:10}),e.jsxs("span",{children:[t.content.length>1e3?"1K+":t.content.length," belgi"]})]})]})]})]})]},t.id)})}),f.length===0&&!x&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"theme-text-muted mb-4",children:e.jsx(p,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"text-xl font-semibold theme-text-secondary mb-2",children:o||i!=="all"?"Maqola topilmadi":"Hozircha maqolalar yo'q"}),e.jsx("p",{className:"theme-text-muted mb-6",children:o||i!=="all"?"Qidiruv so'zini o'zgartiring yoki filtrlarni qayta sozlang":"Birinchi tibbiy maqolangizni yozing"}),e.jsxs(m,{to:"/doctor/posts/create",className:"inline-flex items-center space-x-2 theme-accent-bg text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(j,{size:20}),e.jsx("span",{children:"Yangi Maqola Yozish"})]})]})]})]}):e.jsx("div",{className:"min-h-screen theme-bg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold theme-text mb-4",children:"Kirish Talab Etiladi"}),e.jsx("p",{className:"theme-text-secondary mb-6",children:"Maqolalar sahifasiga kirish uchun tizimga kirishingiz kerak."})]})})};export{ne as default};
