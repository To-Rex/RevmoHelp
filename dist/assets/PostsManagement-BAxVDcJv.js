import{m as ge,r as a,k as se,j as e,X as Z,n as pe,o as be,p as fe,q as ye,i as je,F as H,L as _,t as O,U as ve,G as Ne,v as ke,w as we}from"./index-BLJsMvxT.js";import{g as Ce,a as Se,b as ze}from"./postHelpers-CTJmaGBm.js";import{C as U}from"./check-circle-DLzRG-NL.js";import{A as X}from"./alert-circle-Ch-X4D41.js";import{T as W}from"./tag-DvuQ5R1E.js";import{S as qe}from"./square-pen-GRzW9vvt.js";import{T as ae}from"./trash-2-BEPc6_q0.js";import{P as J}from"./plus-DE2nvxC4.js";import{S as ee}from"./search-BZ6vZID7.js";import{P as Be}from"./play-kajXgAYU.js";import{C as $e}from"./calendar-BnYvyjRp.js";import{E as te}from"./eye-CGZ2FPCT.js";import{C as Ee}from"./clock-CK2-NyCC.js";import{B as Te}from"./ban-D49BHjWD.js";import{C as Le}from"./credit-card-Df4VYXk5.js";import{T as De}from"./trending-up-DxMrzsoW.js";import"./video-BoQwYvsc.js";import"./image-BNEUy3Hs.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=ge("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Me=({onCategoriesChange:g,triggerCreateModal:$,onModalClosed:E})=>{const[Q,A]=a.useState([]),[R,T]=a.useState(!0),[F,u]=a.useState(!1),[Y,z]=a.useState(!1),[y,N]=a.useState(null),[k,m]=a.useState(!1),[q,w]=a.useState(null),[o,r]=a.useState({type:"",text:""}),[l,p]=a.useState({name:"",slug:"",description:"",color:"#62B6CB"}),L=["#62B6CB","#5FA8D3","#1B4965","#BEE9E8","#CAE9FF","#62B6CB","#1B4965","#BEE9E8","#5FA8D3","#CAE9FF","#62B6CB","#1B4965"];a.useEffect(()=>{C()},[]),a.useEffect(()=>{$&&(u(!0),E?.())},[$,E]);const C=async()=>{T(!0);try{const{data:s}=await se();s&&A(s)}catch{r({type:"error",text:"Kategoriyalarni yuklashda xatolik"})}finally{T(!1)}},b=s=>{const{name:c,value:i}=s.target;p(K=>({...K,[c]:i})),o.text&&r({type:"",text:""})};a.useEffect(()=>{if(l.name&&!y){const s=l.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();p(c=>({...c,slug:s}))}},[l.name,y]);const S=()=>{p({name:"",slug:"",description:"",color:"#62B6CB"}),N(null)},B=s=>{p({name:s.name,slug:s.slug,description:s.description||"",color:s.color}),N(s),z(!0)},j=()=>{u(!1),z(!1),S(),r({type:"",text:""})},D=async()=>{if(!l.name.trim())return r({type:"error",text:"Kategoriya nomi kiritilishi shart"}),!1;if(!l.slug.trim())return r({type:"error",text:"URL slug kiritilishi shart"}),!1;const{isUnique:s}=await ye(l.slug,y?.id);return s?!0:(r({type:"error",text:"Bu URL (slug) allaqachon mavjud. Boshqa nom yozing yoki URL ni o'zgartiring."}),!1)},P=async s=>{if(s.preventDefault(),!!await D()){m(!0),r({type:"",text:""});try{const{data:c,error:i}=await be(l);i?r({type:"error",text:"Xatolik: "+i.message}):(r({type:"success",text:"Kategoriya muvaffaqiyatli yaratildi!"}),await C(),g?.(),setTimeout(()=>{j()},1500))}catch{r({type:"error",text:"Xatolik yuz berdi. Qaytadan urinib ko'ring."})}finally{m(!1)}}},f=async s=>{if(s.preventDefault(),!(!y||!await D())){m(!0),r({type:"",text:""});try{const{data:c,error:i}=await fe({id:y.id,...l});i?r({type:"error",text:"Xatolik: "+i.message}):(r({type:"success",text:"Kategoriya muvaffaqiyatli yangilandi!"}),await C(),g?.(),setTimeout(()=>{j()},1500))}catch{r({type:"error",text:"Xatolik yuz berdi. Qaytadan urinib ko'ring."})}finally{m(!1)}}},M=async(s,c)=>{if(confirm(`"${c}" kategoriyasini o'chirishni xohlaysizmi? Bu kategoriyaga tegishli barcha maqolalar kategoriyasiz qoladi.`)){w(s),r({type:"",text:""});try{const{error:i}=await pe(s);i?r({type:"error",text:i.message}):(r({type:"success",text:"Kategoriya muvaffaqiyatli o'chirildi!"}),await C(),g?.())}catch{r({type:"error",text:"Xatolik yuz berdi"})}finally{w(null)}}};return R?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"theme-text-muted text-sm",children:"Kategoriyalar yuklanmoqda..."})]})}):e.jsxs("div",{className:"space-y-6",children:[o.text&&e.jsxs("div",{className:`p-3 rounded-lg flex items-center space-x-2 animate-slide-down ${o.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.type==="success"?e.jsx(U,{size:16,className:"text-green-600 dark:text-green-400"}):e.jsx(X,{size:16,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:`text-sm ${o.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:o.text})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(s=>e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow hover:theme-shadow-lg transition-all duration-300 theme-border border p-4 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:s.color},children:e.jsx(W,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold theme-text",children:s.name}),e.jsxs("p",{className:"text-xs theme-text-muted",children:["/",s.slug]})]})]}),e.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>B(s),className:"p-1 theme-accent hover:text-blue-800 dark:hover:text-blue-300 rounded",title:"Tahrirlash",children:e.jsx(qe,{size:14})}),e.jsx("button",{onClick:()=>M(s.id,s.name),disabled:q===s.id,className:"p-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 rounded disabled:opacity-50",title:"O'chirish",children:q===s.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}):e.jsx(ae,{size:14})})]})]}),s.description&&e.jsx("p",{className:"theme-text-secondary text-sm line-clamp-2",children:s.description})]},s.id))}),F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"theme-bg rounded-2xl theme-shadow-lg theme-border border p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold theme-text",children:"Yangi Kategoriya"}),e.jsx("button",{onClick:j,className:"theme-text-secondary hover:theme-text p-1 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(Z,{size:20})})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[o.text&&e.jsxs("div",{className:`p-3 rounded-lg flex items-center space-x-2 ${o.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.type==="success"?e.jsx(U,{size:16,className:"text-green-600 dark:text-green-400"}):e.jsx(X,{size:16,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:`text-sm ${o.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:o.text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Kategoriya nomi *"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:b,required:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200",placeholder:"Kategoriya nomi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Tavsif"}),e.jsx("textarea",{name:"description",value:l.description,onChange:b,rows:2,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 resize-none",placeholder:"Kategoriya haqida qisqacha"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Rang"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:L.map(s=>e.jsx("button",{type:"button",onClick:()=>p(c=>({...c,color:s})),className:`w-8 h-8 rounded-lg border-2 transition-all duration-200 ${l.color===s?"border-gray-400 scale-110":"border-gray-200 hover:scale-105"}`,style:{backgroundColor:s}},s))}),e.jsx("input",{type:"color",name:"color",value:l.color,onChange:b,className:"w-full h-10 rounded-lg border theme-border cursor-pointer"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:j,className:"flex-1 theme-border border theme-text-secondary px-4 py-2 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:"Bekor qilish"}),e.jsx("button",{type:"submit",disabled:k,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50",children:k?"Yaratilmoqda...":"Yaratish"})]})]})]})}),Y&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"theme-bg rounded-2xl theme-shadow-lg theme-border border p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold theme-text",children:"Kategoriyani Tahrirlash"}),e.jsx("button",{onClick:j,className:"theme-text-secondary hover:theme-text p-1 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(Z,{size:20})})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.text&&e.jsxs("div",{className:`p-3 rounded-lg flex items-center space-x-2 ${o.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[o.type==="success"?e.jsx(U,{size:16,className:"text-green-600 dark:text-green-400"}):e.jsx(X,{size:16,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:`text-sm ${o.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:o.text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Kategoriya nomi *"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:b,required:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Tavsif"}),e.jsx("textarea",{name:"description",value:l.description,onChange:b,rows:2,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Rang"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:L.map(s=>e.jsx("button",{type:"button",onClick:()=>p(c=>({...c,color:s})),className:`w-8 h-8 rounded-lg border-2 transition-all duration-200 ${l.color===s?"border-gray-400 scale-110":"border-gray-200 hover:scale-105"}`,style:{backgroundColor:s}},s))}),e.jsx("input",{type:"color",name:"color",value:l.color,onChange:b,className:"w-full h-10 rounded-lg border theme-border cursor-pointer"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:j,className:"flex-1 theme-border border theme-text-secondary px-4 py-2 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:"Bekor qilish"}),e.jsx("button",{type:"submit",disabled:k,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50",children:k?"Saqlanmoqda...":"Saqlash"})]})]})]})})]})},tt=()=>{const[g,$]=a.useState([]),[E,Q]=a.useState([]),[A,R]=a.useState([]),[T,F]=a.useState(!0),[u,Y]=a.useState("posts"),[z,y]=a.useState(""),[N,k]=a.useState("all"),[m,q]=a.useState("all"),[w,o]=a.useState("all"),[r,l]=a.useState("all"),[p,L]=a.useState(null),[C,b]=a.useState(null),[S,B]=a.useState({type:"",text:""}),[j,D]=a.useState(!1),[P,f]=a.useState(!1),[M,s]=a.useState(!1),[c,i]=a.useState(!1),[K,v]=a.useState(!1);a.useEffect(()=>{G()},[]),a.useEffect(()=>{const t=()=>{f(!1),s(!1),i(!1),v(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]);const G=async()=>{F(!0);try{const[t,n]=await Promise.all([je(),se()]);if(t.data){$(t.data);const d=t.data.filter(x=>x.author).reduce((x,h)=>(h.author&&!x.find(I=>I.id===h.author.id)&&x.push(h.author),x),[]);R(d)}n.data&&Q(n.data)}catch(t){console.error("Error loading data:",t)}finally{F(!1)}},re=()=>{G()},le=[{id:"posts",label:"Maqolalar",icon:H},{id:"categories",label:"Kategoriyalar",icon:W}],ie=u==="posts"?"Maqolalar Boshqaruvi":"Kategoriyalar",ne=u==="posts"?"Maqolalarni yaratish va boshqarish":"Maqola kategoriyalarini boshqarish",oe=async t=>{if(confirm("Bu maqolani o'chirishni xohlaysizmi?")){L(t);try{const{error:n}=await we(t);n?alert("Xatolik: "+n.message):$(d=>d.filter(x=>x.id!==t))}catch{alert("Xatolik yuz berdi")}finally{L(null)}}},de=async(t,n,d)=>{if(confirm(`"${n}" maqolasini ${d?"blokdan chiqarish":"bloklash"}ni xohlaysizmi?`)){b(t),B({type:"",text:""});try{const{error:h}=await ke({id:t,published:d});h?B({type:"error",text:h.message}):(B({type:"success",text:`Maqola muvaffaqiyatli ${d?"blokdan chiqarildi va nashr etildi":"bloklandi"}!`}),await G())}catch{B({type:"error",text:"Xatolik yuz berdi"})}finally{b(null)}}},V=g.filter(t=>{const n=t.title.toLowerCase().includes(z.toLowerCase())||t.excerpt.toLowerCase().includes(z.toLowerCase()),d=N==="all"||t.category_id===N,x=w==="all"||t.author_id===w,h=m==="all"||m==="published"&&t.published||m==="draft"&&!t.published,I=r==="all"||r==="blocked"&&!t.published||r==="active"&&t.published;return n&&d&&x&&h&&I}),ce=t=>new Date(t).toLocaleDateString("uz-UZ",{year:"numeric",month:"short",day:"numeric"}),xe=()=>{if(N==="all")return"Barcha kategoriyalar";const t=E.find(n=>n.id===N);return t?t.name:"Barcha kategoriyalar"},me=()=>{if(w==="all")return"Barcha mualliflar";const t=A.find(n=>n.id===w);return t?`${t.full_name} (${t.role==="doctor"?"Shifokor":"Admin"})`:"Barcha mualliflar"},he=()=>m==="all"?"Barcha holatlar":m==="published"?"Nashr etilgan":m==="draft"?"Qoralama":"Barcha holatlar",ue=()=>r==="all"?"Barcha maqolalar":r==="active"?"Faol maqolalar":r==="blocked"?"Bloklangan maqolalar":"Barcha maqolalar";return T?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 lg:space-y-6 xl:space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold theme-text",children:ie}),e.jsx("p",{className:"theme-text-secondary text-sm lg:text-base",children:ne})]}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsx("div",{className:"inline-flex rounded-lg theme-bg-secondary p-1",children:le.map(t=>{const n=t.icon;return e.jsxs("button",{onClick:()=>Y(t.id),className:`flex items-center space-x-2 px-4 lg:px-6 py-2 lg:py-3 font-semibold transition-all duration-200 whitespace-nowrap rounded-md text-sm ${u===t.id?"theme-accent-bg text-white shadow-sm":"theme-text-secondary hover:theme-accent"}`,children:[e.jsx(n,{size:16}),e.jsx("span",{children:t.label})]},t.id)})})}),e.jsxs("div",{children:[u==="posts"&&e.jsxs(_,{to:"/admin/posts/create",className:"flex items-center space-x-2 theme-accent-bg text-white px-3 lg:px-4 py-2 lg:py-2.5 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(J,{size:18}),e.jsx("span",{children:"Yangi Maqola"})]}),u==="categories"&&e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center space-x-2 theme-accent-bg text-white px-3 lg:px-4 py-2 lg:py-2.5 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(J,{size:18}),e.jsx("span",{children:"Yangi Kategoriya"})]})]})]}),S.text&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center space-x-2 animate-slide-down max-w-md mx-auto ${S.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[S.type==="success"?e.jsx(U,{size:20,className:"text-green-600"}):e.jsx(X,{size:20,className:"text-red-600"}),e.jsx("span",{className:S.type==="success"?"text-green-700":"text-red-700",children:S.text})]})]}),e.jsxs("div",{className:"mt-6",children:[u==="categories"&&e.jsx(Me,{onCategoriesChange:re,triggerCreateModal:j,onModalClosed:()=>D(!1)}),u==="posts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold theme-text",children:g.length}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:"Jami maqolalar"})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600",children:g.filter(t=>t.published).length}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:"Nashr etilgan"})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:g.filter(t=>!t.published).length}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:"Qoralama"})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-blue-600",children:g.reduce((t,n)=>t+(n.views_count||0),0).toLocaleString()}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:"Jami ko'rishlar"})]})]}),e.jsx("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 theme-text-muted",size:18}),e.jsx("input",{type:"text",placeholder:"Maqolalarni qidiring...",value:z,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm"})]})}),e.jsxs("div",{className:"lg:w-48 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),s(!1),i(!1),v(!1),f(!P)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:xe()}),e.jsx(O,{className:`theme-text-muted transition-transform ${P?"rotate-180":""}`,size:16})]}),P&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:[e.jsx("div",{onClick:()=>{k("all"),f(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Barcha kategoriyalar"}),E.map(t=>e.jsx("div",{onClick:()=>{k(t.id),f(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:t.name},t.id))]})]}),e.jsxs("div",{className:"lg:w-56 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),f(!1),i(!1),v(!1),s(!M)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:me()}),e.jsx(O,{className:`theme-text-muted transition-transform ${M?"rotate-180":""}`,size:16})]}),M&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:[e.jsx("div",{onClick:()=>{o("all"),s(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Barcha mualliflar"}),A.map(t=>e.jsxs("div",{onClick:()=>{o(t.id),s(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:[t.full_name," (",t.role==="doctor"?"Shifokor":"Admin",")"]},t.id))]})]}),e.jsxs("div",{className:"lg:w-48 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),f(!1),s(!1),v(!1),i(!c)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:he()}),e.jsx(O,{className:`theme-text-muted transition-transform ${c?"rotate-180":""}`,size:16})]}),c&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[e.jsx("div",{onClick:()=>{q("all"),i(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Barcha holatlar"}),e.jsx("div",{onClick:()=>{q("published"),i(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Nashr etilgan"}),e.jsx("div",{onClick:()=>{q("draft"),i(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Qoralama"})]})]}),e.jsxs("div",{className:"lg:w-48 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),f(!1),s(!1),i(!1),v(!K)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:ue()}),e.jsx(O,{className:`theme-text-muted transition-transform ${K?"rotate-180":""}`,size:16})]}),K&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[e.jsx("div",{onClick:()=>{l("all"),v(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Barcha maqolalar"}),e.jsx("div",{onClick:()=>{l("active"),v(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Faol maqolalar"}),e.jsx("div",{onClick:()=>{l("blocked"),v(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:"Bloklangan maqolalar"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:V.map(t=>{const n=Ce(t),d=!t.published;return e.jsxs("div",{className:`theme-bg rounded-2xl theme-shadow-lg theme-border border overflow-hidden hover:theme-shadow-xl transition-all duration-300 transform hover:-translate-y-2 group ${d?"opacity-75 border-red-300 dark:border-red-600":""}`,children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.featured_image_url?e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):t.youtube_url?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:`https://img.youtube.com/vi/${t.youtube_url.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/maxresdefault.jpg`,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",loading:"lazy",onError:x=>{const h=x.target;h.src=`https://img.youtube.com/vi/${t.youtube_url.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/hqdefault.jpg`}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center group-hover:bg-opacity-50 transition-all duration-300",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-xl animate-pulse group-hover:scale-110 transition-transform duration-300",children:e.jsx(Be,{size:24,className:"text-white ml-1"})})})]}):e.jsx("div",{className:"w-full h-full theme-bg-tertiary flex items-center justify-center group-hover:theme-bg-quaternary transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(n,{size:48,className:"theme-text-muted mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsx("p",{className:"theme-text-muted text-sm font-medium",children:"Matn Maqolasi"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:t.category&&e.jsx("span",{className:"px-3 py-1 text-xs font-semibold text-white rounded-full shadow-lg backdrop-blur-sm",style:{backgroundColor:t.category.color},children:t.category.name})}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${ze(t)}`,children:Se(t)}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${d?"bg-red-500 text-white":t.published?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:d?"Bloklangan":"Faol"})]})]}),e.jsxs("div",{className:"p-4 lg:p-5",children:[e.jsx("h3",{className:"text-lg font-bold theme-text mb-3 line-clamp-2 group-hover:theme-accent transition-colors duration-300",children:t.title}),e.jsx("p",{className:"theme-text-secondary text-sm mb-4 line-clamp-3 leading-relaxed",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-xs theme-text-muted mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ve,{size:12}),e.jsxs("span",{className:"truncate max-w-28 font-medium",children:[t.author?.full_name,t.author?.role==="doctor"&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded font-bold",children:"Dr"}),t.author?.role==="admin"&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded font-bold",children:"Admin"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx($e,{size:12}),e.jsx("span",{children:ce(t.created_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(te,{size:12}),e.jsx("span",{className:"theme-accent font-medium",children:(t.views_count||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[t.tags.slice(0,2).map(x=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs rounded-full font-medium",children:["#",x]},x)),t.tags.length>2&&e.jsxs("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full font-medium",children:["+",t.tags.length-2]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs theme-text-muted mb-4 p-3 theme-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ne,{size:10}),e.jsxs("span",{children:["SEO: ",t.meta_title?"✅":"❌"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(W,{size:10}),e.jsxs("span",{className:"truncate max-w-24",children:["/",t.slug]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ee,{size:10}),e.jsxs("span",{children:[Math.ceil(t.content.length/1e3)," min"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t theme-border",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>de(t.id,t.title,d),disabled:C===t.id,className:`flex items-center space-x-1 p-2 rounded-lg transition-all duration-200 transform hover:scale-105 ${d?"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20":"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20"} disabled:opacity-50 disabled:transform-none`,title:d?"Blokdan chiqarish va nashr etish":"Bloklash (nashrdan olib tashlash)",children:C===t.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}):e.jsxs(e.Fragment,{children:[d?e.jsx(Pe,{size:14}):e.jsx(Te,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:d?"Faollashtirish":"Bloklash"})]})}),e.jsxs(_,{to:`/admin/posts/edit/${t.id}`,className:"flex items-center space-x-1 theme-accent hover:text-blue-800 dark:hover:text-blue-300 p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900 transition-all duration-200 transform hover:scale-105",title:"Tahrirlash",children:[e.jsx(Le,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:"Tahrirlash"})]}),e.jsxs(_,{to:`/posts/${t.slug}`,target:"_blank",className:"flex items-center space-x-1 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900 transition-all duration-200 transform hover:scale-105",title:"Ko'rish",children:[e.jsx(te,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:"Ko'rish"})]}),e.jsx("button",{onClick:()=>oe(t.id),disabled:p===t.id,className:"flex items-center space-x-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none",title:"O'chirish",children:p===t.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:"O'chirish"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs theme-text-muted",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(De,{size:10}),e.jsxs("span",{children:[t.tags.length," teg"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{size:10}),e.jsxs("span",{children:[t.content.length>1e3?"1K+":t.content.length," belgi"]})]})]})]})]})]},t.id)})}),V.length===0&&!T&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"theme-text-muted mb-4",children:e.jsx(ee,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"text-xl font-semibold theme-text-secondary mb-2",children:"Maqola topilmadi"}),e.jsx("p",{className:"theme-text-muted mb-6",children:"Qidiruv so'zini o'zgartiring yoki yangi maqola yarating"}),e.jsxs(_,{to:"/admin/posts/create",className:"inline-flex items-center space-x-2 theme-accent-bg text-white px-4 lg:px-6 py-2 lg:py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(J,{size:18}),e.jsx("span",{children:"Birinchi maqolani yaratish"})]})]})]})]})]})};export{tt as default};
