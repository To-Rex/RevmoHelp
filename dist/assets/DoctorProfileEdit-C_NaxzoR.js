import{m as V,c as W,u as $,d as Q,r as o,j as e,U as A,X as y,F as Y}from"./index-CaEN0LVA.js";import{S as Z}from"./SEOHead-Cja2CTz6.js";import{a as ee,u as te}from"./doctorProfiles-_vKrNJJT.js";import{A as se}from"./arrow-left-S3nn1Qb0.js";import{C as ae}from"./check-circle--lu5k8Gk.js";import{A as re}from"./alert-circle-gwVqmrXV.js";import{A as ie}from"./award-Die_a-B1.js";import{P as E}from"./plus-BjSJaAB3.js";import{G as le}from"./graduation-cap-ZBsBT8AU.js";import{L as oe}from"./languages-DVVHCfaV.js";import{C as ne}from"./clock-C8PnlhDy.js";import{S as ce}from"./save-CCdDHFjQ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=V("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),we=()=>{const{t:ue}=W(),m=$(),{user:x}=Q(),[j,D]=o.useState(null),[L,v]=o.useState(!0),[N,k]=o.useState(!1),[c,n]=o.useState({type:"",text:""}),[d,B]=o.useState("uz"),[h,w]=o.useState(""),[b,z]=o.useState(""),[C,p]=o.useState(null),[r,l]=o.useState({specialization:"",experience_years:0,bio:"",avatar:void 0,certificates:[],education:[],languages:["uz"],consultation_fee:0,consultation_duration:30,working_hours:{monday:{start:"09:00",end:"17:00",available:!0},tuesday:{start:"09:00",end:"17:00",available:!0},wednesday:{start:"09:00",end:"17:00",available:!0},thursday:{start:"09:00",end:"17:00",available:!0},friday:{start:"09:00",end:"17:00",available:!0},saturday:{start:"09:00",end:"14:00",available:!1},sunday:{start:"09:00",end:"14:00",available:!1}},translations:{ru:{bio:"",specialization:"",education:[]},en:{bio:"",specialization:"",education:[]}}}),M=[{code:"uz",label:"O'zbek",flag:"ðŸ‡ºðŸ‡¿"},{code:"ru",label:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º"},{code:"en",label:"English",flag:"ðŸ‡ºðŸ‡¸"}],I=[{key:"monday",label:"Dushanba"},{key:"tuesday",label:"Seshanba"},{key:"wednesday",label:"Chorshanba"},{key:"thursday",label:"Payshanba"},{key:"friday",label:"Juma"},{key:"saturday",label:"Shanba"},{key:"sunday",label:"Yakshanba"}],R=[{code:"uz",label:"O'zbek tili"},{code:"ru",label:"Rus tili"},{code:"en",label:"Ingliz tili"},{code:"tr",label:"Turk tili"},{code:"ar",label:"Arab tili"}];o.useEffect(()=>{x&&F()},[x]);const F=async()=>{if(x){v(!0);try{const{data:t,error:s}=await ee(x.id);s?n({type:"error",text:"Profil yuklanmadi: "+s.message}):t?(D(t),l({specialization:t.specialization,experience_years:t.experience_years,bio:t.bio||"",avatar:void 0,certificates:t.certificates||[],education:t.education||[],languages:t.languages||["uz"],consultation_fee:t.consultation_fee||0,consultation_duration:t.consultation_duration||30,working_hours:t.working_hours||r.working_hours,translations:{ru:{bio:"",specialization:"",education:[]},en:{bio:"",specialization:"",education:[]}}}),t.avatar_url&&p(t.avatar_url)):m("/doctor-registration")}catch{n({type:"error",text:"Xatolik yuz berdi"})}finally{v(!1)}}},u=t=>{const{name:s,value:a,type:i}=t.target,q=i==="checkbox"?t.target.checked:!1;if(s.includes(".")){const[g,J]=s.split(".");l(T=>({...T,[g]:{...T[g],[J]:i==="checkbox"?q:i==="number"?Number(a):a}}))}else l(g=>({...g,[s]:i==="checkbox"?q:i==="number"?Number(a):a}));c.text&&n({type:"",text:""})},_=t=>{const{name:s,value:a}=t.target;l(i=>({...i,translations:{...i.translations,[d]:{...i.translations[d],[s]:a}}}))},f=(t,s,a)=>{l(i=>({...i,working_hours:{...i.working_hours,[t]:{...i.working_hours[t],[s]:a}}}))},S=()=>{h.trim()&&!r.certificates.includes(h.trim())&&(l(t=>({...t,certificates:[...t.certificates,h.trim()]})),w(""))},O=t=>{l(s=>({...s,certificates:s.certificates.filter(a=>a!==t)}))},P=()=>{b.trim()&&!r.education.includes(b.trim())&&(l(t=>({...t,education:[...t.education,b.trim()]})),z(""))},U=t=>{l(s=>({...s,education:s.education.filter(a=>a!==t)}))},G=t=>{l(s=>({...s,languages:s.languages.includes(t)?s.languages.filter(a=>a!==t):[...s.languages,t]}))},K=t=>{const s=t.target.files?.[0];if(s){if(s.size>5*1024*1024){n({type:"error",text:"Rasm hajmi 5MB dan kichik bo'lishi kerak"});return}l(i=>({...i,avatar:s}));const a=new FileReader;a.onload=()=>p(a.result),a.readAsDataURL(s)}},X=()=>{l(t=>({...t,avatar:void 0})),p(null)},H=async t=>{if(t.preventDefault(),!!j){k(!0),n({type:"",text:""});try{const{data:s,error:a}=await te({id:j.id,...r});a?n({type:"error",text:"Xatolik: "+a.message}):(n({type:"success",text:"Profil muvaffaqiyatli yangilandi!"}),setTimeout(()=>{m("/doctor-dashboard")},1500))}catch{n({type:"error",text:"Xatolik yuz berdi. Qaytadan urinib ko'ring."})}finally{k(!1)}}};return L?e.jsx("div",{className:"min-h-screen theme-bg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"theme-text-muted",children:"Profil yuklanmoqda..."})]})}):e.jsxs("div",{className:"min-h-screen theme-bg",children:[e.jsx(Z,{title:"Shifokor Profilini Tahrirlash",description:"Shifokor profili ma'lumotlarini tahrirlash va yangilash",keywords:"shifokor profili, tahrirlash, tibbiy mutaxassis",url:"https://revmohelp.uz/doctor/profile/edit"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx("button",{onClick:()=>m("/doctor-dashboard"),className:"p-2 theme-text-secondary hover:theme-text rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(se,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold theme-text",children:"Profilni Tahrirlash"}),e.jsx("p",{className:"theme-text-secondary",children:"Professional ma'lumotlaringizni yangilang"})]})]}),c.text&&e.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-center space-x-2 animate-slide-down ${c.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[c.type==="success"?e.jsx(ae,{size:20,className:"text-green-600"}):e.jsx(re,{size:20,className:"text-red-600"}),e.jsx("span",{className:c.type==="success"?"text-green-700":"text-red-700",children:c.text})]}),e.jsxs("form",{onSubmit:H,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl theme-shadow-lg theme-border border p-8",children:[e.jsxs("h2",{className:"text-xl font-bold theme-text mb-6 flex items-center space-x-2",children:[e.jsx(A,{size:20,className:"text-blue-600"}),e.jsx("span",{children:"Asosiy Ma'lumotlar"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Profil rasmi"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[C?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:C,alt:"Avatar preview",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"}),e.jsx("button",{type:"button",onClick:X,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200",children:e.jsx(y,{size:16})})]}):e.jsx("div",{className:"w-24 h-24 theme-bg-tertiary rounded-full flex items-center justify-center border-2 theme-border border-dashed",children:e.jsx(A,{size:32,className:"theme-text-muted"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center space-x-2 theme-accent-bg text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[e.jsx(de,{size:16}),e.jsx("span",{children:"Rasm yuklash"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:K})]}),e.jsx("p",{className:"text-xs theme-text-muted mt-2",children:"PNG, JPG, WEBP (max 5MB)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Mutaxassislik *"}),e.jsx("input",{type:"text",name:"specialization",value:r.specialization,onChange:u,required:!0,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Tajriba (yil) *"}),e.jsx("input",{type:"number",name:"experience_years",value:r.experience_years,onChange:u,required:!0,min:"0",max:"50",className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Konsultatsiya narxi (so'm)"}),e.jsx("input",{type:"number",name:"consultation_fee",value:r.consultation_fee,onChange:u,min:"0",className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Konsultatsiya davomiyligi (daqiqa)"}),e.jsxs("select",{name:"consultation_duration",value:r.consultation_duration,onChange:u,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text",children:[e.jsx("option",{value:15,children:"15 daqiqa"}),e.jsx("option",{value:30,children:"30 daqiqa"}),e.jsx("option",{value:45,children:"45 daqiqa"}),e.jsx("option",{value:60,children:"1 soat"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl theme-shadow-lg theme-border border p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold theme-text flex items-center space-x-2",children:[e.jsx(Y,{size:20,className:"text-green-600"}),e.jsx("span",{children:"Bio va Tarjimalar"})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:M.map(t=>e.jsxs("button",{type:"button",onClick:()=>B(t.code),className:`px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 flex items-center space-x-2 ${d===t.code?"bg-white theme-text shadow-sm":"theme-text-secondary hover:theme-text"}`,children:[e.jsx("span",{children:t.flag}),e.jsx("span",{children:t.label})]},t.code))})]}),d==="uz"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Bio (O'zbek) *"}),e.jsx("textarea",{name:"bio",value:r.bio,onChange:u,required:!0,rows:6,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text resize-none",placeholder:"O'zingiz haqingizda batafsil yozing..."})]}),d==="ru"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Ð‘Ð¸Ð¾ (Ð ÑƒÑÑÐºÐ¸Ð¹)"}),e.jsx("textarea",{name:"bio",value:r.translations.ru.bio,onChange:_,rows:6,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text resize-none",placeholder:"ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð¾ Ñ€Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¾ ÑÐµÐ±Ðµ..."})]}),d==="en"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"Bio (English)"}),e.jsx("textarea",{name:"bio",value:r.translations.en.bio,onChange:_,rows:6,className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text resize-none",placeholder:"Tell us about yourself in detail..."})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl theme-shadow-lg theme-border border p-8",children:[e.jsxs("h2",{className:"text-xl font-bold theme-text mb-6 flex items-center space-x-2",children:[e.jsx(ie,{size:20,className:"text-purple-600"}),e.jsx("span",{children:"Sertifikatlar"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Sertifikat qo'shish",value:h,onChange:t=>w(t.target.value),onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),S()),className:"flex-1 px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"}),e.jsx("button",{type:"button",onClick:S,className:"px-4 py-3 theme-accent-bg text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:e.jsx(E,{size:20})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.certificates.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 text-purple-800 rounded-lg border border-purple-200",children:[e.jsx("span",{className:"flex-1",children:t}),e.jsx("button",{type:"button",onClick:()=>O(t),className:"text-purple-600 hover:text-purple-800 ml-2",children:e.jsx(y,{size:16})})]},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl theme-shadow-lg theme-border border p-8",children:[e.jsxs("h2",{className:"text-xl font-bold theme-text mb-6 flex items-center space-x-2",children:[e.jsx(le,{size:20,className:"text-orange-600"}),e.jsx("span",{children:"Ta'lim"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Ta'lim muassasasi qo'shish",value:b,onChange:t=>z(t.target.value),onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),P()),className:"flex-1 px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"}),e.jsx("button",{type:"button",onClick:P,className:"px-4 py-3 theme-accent-bg text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:e.jsx(E,{size:20})})]}),e.jsx("div",{className:"space-y-3",children:r.education.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 text-orange-800 rounded-lg border border-orange-200",children:[e.jsx("span",{className:"flex-1",children:t}),e.jsx("button",{type:"button",onClick:()=>U(t),className:"text-orange-600 hover:text-orange-800 ml-2",children:e.jsx(y,{size:16})})]},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl theme-shadow-lg theme-border border p-8",children:[e.jsxs("h2",{className:"text-xl font-bold theme-text mb-6 flex items-center space-x-2",children:[e.jsx(oe,{size:20,className:"text-teal-600"}),e.jsx("span",{children:"Tillar"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:R.map(t=>e.jsxs("label",{className:"flex items-center space-x-3 p-4 theme-bg-secondary rounded-lg border theme-border cursor-pointer hover:theme-shadow-md transition-all duration-200",children:[e.jsx("input",{type:"checkbox",checked:r.languages.includes(t.code),onChange:()=>G(t.code),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium theme-text",children:t.label})]},t.code))})]}),e.jsxs("div",{className:"bg-white rounded-2xl theme-shadow-lg theme-border border p-8",children:[e.jsxs("h2",{className:"text-xl font-bold theme-text mb-6 flex items-center space-x-2",children:[e.jsx(ne,{size:20,className:"text-indigo-600"}),e.jsx("span",{children:"Ish Vaqti"})]}),e.jsx("div",{className:"space-y-4",children:I.map(t=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 theme-bg-secondary rounded-lg border theme-border",children:[e.jsx("div",{className:"w-24",children:e.jsx("span",{className:"text-sm font-medium theme-text",children:t.label})}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.working_hours[t.key]?.available||!1,onChange:s=>f(t.key,"available",s.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm theme-text-secondary",children:"Mavjud"})]}),r.working_hours[t.key]?.available&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"time",value:r.working_hours[t.key].start,onChange:s=>f(t.key,"start",s.target.value),className:"px-3 py-2 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"}),e.jsx("span",{className:"theme-text-secondary",children:"dan"}),e.jsx("input",{type:"time",value:r.working_hours[t.key].end,onChange:s=>f(t.key,"end",s.target.value),className:"px-3 py-2 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white theme-text"}),e.jsx("span",{className:"theme-text-secondary",children:"gacha"})]})]},t.key))})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>m("/doctor-dashboard"),className:"px-8 py-4 theme-border border theme-text-secondary rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:"Bekor qilish"}),e.jsxs("button",{type:"submit",disabled:N,className:"px-8 py-4 theme-accent-bg text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(ce,{size:20}),e.jsx("span",{children:N?"Saqlanmoqda...":"Saqlash"})]})]})]})]})]})};export{we as default};
