import{d as E,r as g,j as e,a3 as N,X as z,F as S,c as $,u as _,_ as L,a8 as y,U as b,L as w,M as B,e as k,a4 as C,a9 as P,aa as A}from"./index-DgpMijFB.js";import{L as t}from"./LanguageAwareLink-CP3imthH.js";import{u as O}from"./useNotifications-nYsi4npf.js";import{C as q}from"./calendar-MpRXBiEq.js";import{M}from"./mail-wu_-C6yk.js";import{P as R}from"./phone-7DfGw2yD.js";import{M as D}from"./map-pin-Ys-Gfway.js";import"./notifications-CdR5GNOE.js";const U=()=>{const{user:s}=E(),{notifications:n,unreadCount:i,markAsRead:c}=O(),[x,r]=g.useState(!1);if(!s)return null;const m=n.slice(0,5),a=o=>{switch(o){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":return"âŒ";default:return"ðŸ“¢"}},h=o=>{switch(o){case"success":return"border-l-green-500 bg-green-50 dark:bg-green-900/20";case"warning":return"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"error":return"border-l-red-500 bg-red-50 dark:bg-red-900/20";default:return"border-l-blue-500 bg-blue-50 dark:bg-blue-900/20"}},j=o=>{const d=new Date(o),l=(new Date().getTime()-d.getTime())/(1e3*60*60);return l<1?"Hozir":l<24?`${Math.floor(l)} soat oldin`:d.toLocaleDateString("uz-UZ",{month:"short",day:"numeric"})},f=o=>{o.read_by.includes(s.id)||c(o.id)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!x),className:"relative p-2 theme-text-secondary hover:theme-accent transition-all duration-300 rounded-lg hover:theme-bg-tertiary",children:[e.jsx(N,{size:20}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:i>9?"9+":i})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl theme-border border py-2 z-50 max-h-96 overflow-hidden",style:{backgroundColor:"white",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{className:"px-4 py-3 theme-border border-b flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold theme-text",children:"Bildirishnomalar"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i>0&&e.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 text-xs font-medium rounded-full",children:[i," yangi"]}),e.jsx("button",{onClick:()=>r(!1),className:"theme-text-muted hover:theme-accent",children:e.jsx(z,{size:16})})]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:m.length>0?e.jsx("div",{className:"py-2",children:m.map(o=>{const d=!o.read_by.includes(s.id);return e.jsx("div",{onClick:()=>f(o),className:`px-4 py-3 hover:theme-bg-tertiary transition-colors duration-200 cursor-pointer border-l-4 ${h(o.type)} ${d?"bg-opacity-100":"bg-opacity-50"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-lg flex-shrink-0 mt-1",children:a(o.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:`text-sm font-medium ${d?"theme-text":"theme-text-secondary"} truncate`,children:o.title}),d&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 ml-2"})]}),e.jsx("p",{className:"text-xs theme-text-secondary line-clamp-2 mb-2",children:o.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs theme-text-muted",children:[e.jsx(q,{size:12}),e.jsx("span",{children:j(o.sent_at)})]}),o.post&&e.jsxs(t,{to:`/posts/${o.post.slug}`,className:"flex items-center space-x-1 text-xs theme-accent hover:text-blue-800 dark:hover:text-blue-300",onClick:u=>u.stopPropagation(),children:[e.jsx(S,{size:12}),e.jsx("span",{children:"Ko'rish"})]})]})]})]})},o.id)})}):e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(N,{size:32,className:"theme-text-muted mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"theme-text-secondary text-sm",children:"Bildirishnomalar yo'q"})]})}),e.jsx("div",{className:"px-4 py-3 theme-border border-t",children:e.jsx(t,{to:"/profile?tab=notifications",className:"block text-center text-sm theme-accent hover:text-blue-800 dark:hover:text-blue-300 font-medium",onClick:()=>r(!1),children:"Barcha bildirishnomalarni ko'rish"})})]})]})]})},F=()=>{const[s,n]=g.useState(!1),[i,c]=g.useState(!1),x=g.useRef(null);g.useEffect(()=>{const p=v=>{x.current&&!x.current.contains(v.target)&&c(!1)};return i&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[i]);const{t:r,i18n:m}=$(),{user:a,session:h,signOut:j}=E();a&&console.log({user_metadata:h?.user?.user_metadata,provider:h?.user?.app_metadata?.provider});const f=_(),o=L(),d=h?.user?.app_metadata?.provider==="phone"?h?.user?.phone:a?.email,u=async()=>{await j(),f("/"),c(!1)},l=p=>{const v=m.language==="ru"||m.language==="en"?`/${m.language}${p}`:p;return o.pathname===v};return e.jsx("header",{className:"bg-white theme-shadow theme-border border-b sticky top-0 z-50",children:e.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(t,{to:"/",className:"flex items-center space-x-2 group",children:[e.jsx("img",{src:"/logo.png",alt:"Revmohelp Logo",className:"w-8 h-8 rounded-lg object-cover group-hover:scale-110 transition-transform duration-300"}),e.jsx("span",{className:"text-xl font-bold theme-text group-hover:theme-accent transition-colors duration-300",children:"Revmohelp"})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[e.jsx(t,{to:"/",className:`transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap ${l("/")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,children:r("home")}),e.jsx(t,{to:"/posts",className:`transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap ${l("/posts")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,children:r("posts")}),e.jsx(t,{to:"/doctors",className:`transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap ${l("/doctors")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,children:r("doctors")}),e.jsx(t,{to:"/patient-stories",className:`transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap ${l("/patient-stories")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,children:r("patientStories")}),e.jsx(t,{to:"/qa",className:`transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap ${l("/qa")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,children:r("qa")}),e.jsx(t,{to:"/about",className:`transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap ${l("/about")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,children:r("about")})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx(y,{}),a&&e.jsx(U,{}),a?e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!i),className:"p-2 rounded-lg hover:theme-bg-tertiary transition-all duration-300",children:a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.full_name,className:"w-10 h-10 rounded-full object-cover border-2 border-[#A6BAB4]"}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#CAD8D6] to-[#B8C9C5] rounded-full flex items-center justify-center",children:e.jsx(b,{size:16,className:"theme-accent"})})}),i&&e.jsxs("div",{className:"absolute right-0 mt-2 w-52 bg-white rounded-xl shadow-xl theme-border border py-2",ref:x,style:{backgroundColor:"white",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{className:"px-4 py-3 theme-border border-b",children:[e.jsx("div",{className:"text-sm font-semibold theme-text",children:a.full_name}),e.jsx("div",{className:"text-xs theme-text-muted",children:d})]}),e.jsxs(t,{to:"/profile",className:"flex items-center space-x-2 px-4 py-2 text-sm theme-text-secondary hover:theme-bg-tertiary hover:theme-accent transition-all duration-300",onClick:()=>c(!1),children:[e.jsx(b,{size:16}),e.jsx("span",{children:"Profil"})]}),(a.role==="admin"||a.role==="moderator")&&e.jsxs(w,{to:"/admin",className:"flex items-center space-x-2 px-4 py-2 text-sm theme-text-secondary hover:theme-bg-tertiary hover:theme-accent transition-all duration-300",onClick:()=>c(!1),children:[e.jsx(B,{size:16}),e.jsx("span",{children:"Admin Panel"})]}),a.role==="doctor"&&e.jsxs(t,{to:"/doctor-dashboard",className:"flex items-center space-x-2 px-4 py-2 text-sm theme-text-secondary hover:theme-bg-tertiary hover:theme-accent transition-all duration-300",onClick:()=>c(!1),children:[e.jsx(k,{size:16}),e.jsx("span",{children:"Shifokor Paneli"})]}),e.jsx("div",{className:"theme-border border-t my-2"}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300",children:[e.jsx(C,{size:16}),e.jsx("span",{children:r("logout")})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{to:"/login",className:"theme-text hover:theme-accent hover:theme-bg-tertiary transition-all duration-300 font-medium px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:r("login")}),e.jsx(t,{to:"/register",className:"text-white bg-[#62B6CB] px-3 py-2 rounded-lg transition-all duration-300 font-medium shadow-sm hover:opacity-90 text-sm whitespace-nowrap",children:r("register")})]})]}),e.jsxs("div",{className:"lg:hidden flex items-center space-x-2",children:[e.jsx(y,{}),e.jsx("button",{onClick:()=>n(!s),className:"lg:hidden p-2 theme-text-secondary hover:theme-accent transition-all duration-300 rounded-lg hover:theme-bg-tertiary",children:s?e.jsx(z,{size:24}):e.jsx(P,{size:24})})]})]}),s&&e.jsx("div",{className:"lg:hidden py-4 theme-border border-t",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx(t,{to:"/",className:`transition-all duration-300 font-medium py-2 px-3 rounded-lg text-sm whitespace-nowrap ${l("/")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,onClick:()=>n(!1),children:r("home")}),e.jsx(t,{to:"/posts",className:`transition-all duration-300 font-medium py-2 px-3 rounded-lg text-sm whitespace-nowrap ${l("/posts")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,onClick:()=>n(!1),children:r("posts")}),e.jsx(t,{to:"/doctors",className:`transition-all duration-300 font-medium py-2 px-3 rounded-lg text-sm whitespace-nowrap ${l("/doctors")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,onClick:()=>n(!1),children:r("doctors")}),e.jsx(t,{to:"/patient-stories",className:`transition-all duration-300 font-medium py-2 px-3 rounded-lg text-sm whitespace-nowrap ${l("/patient-stories")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,onClick:()=>n(!1),children:r("patientStories")}),e.jsx(t,{to:"/qa",className:`transition-all duration-300 font-medium py-2 px-3 rounded-lg text-sm whitespace-nowrap ${l("/qa")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,onClick:()=>n(!1),children:r("qa")}),e.jsx(t,{to:"/about",className:`transition-all duration-300 font-medium py-2 px-3 rounded-lg text-sm whitespace-nowrap ${l("/about")?"text-white bg-[#62B6CB]":"text-[#1B4965] hover:text-[#62B6CB] hover:bg-[#BEE9E8]"}`,onClick:()=>n(!1),children:r("about")}),a?e.jsxs("div",{className:"pt-3 theme-border border-t space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 py-2 px-3 theme-bg-tertiary rounded-lg",children:[a.avatar_url?e.jsx("img",{src:a.avatar_url,alt:a.full_name,className:"w-8 h-8 rounded-full object-cover border border-[#A6BAB4]"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#CAD8D6] to-[#B8C9C5] rounded-full flex items-center justify-center",children:e.jsx(b,{size:14,className:"theme-accent"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold theme-text",children:a.full_name}),e.jsx("div",{className:"text-xs theme-text-muted capitalize",children:a.role})]})]}),e.jsxs(t,{to:"/profile",className:"flex items-center space-x-2 theme-text hover:theme-accent transition-all duration-300 font-medium py-2 px-3 rounded-lg hover:theme-bg-tertiary",onClick:()=>n(!1),children:[e.jsx(b,{size:16}),e.jsx("span",{children:"Profil"})]}),(a.role==="admin"||a.role==="moderator")&&e.jsxs(w,{to:"/admin",className:"flex items-center space-x-2 theme-text hover:theme-accent transition-all duration-300 font-medium py-2 px-3 rounded-lg hover:theme-bg-tertiary",onClick:()=>n(!1),children:[e.jsx(B,{size:16}),e.jsx("span",{children:"Admin Panel"})]}),a.role==="doctor"&&e.jsxs(t,{to:"/doctor-dashboard",className:"flex items-center space-x-2 theme-text hover:theme-accent transition-all duration-300 font-medium py-2 px-3 rounded-lg hover:theme-bg-tertiary",onClick:()=>n(!1),children:[e.jsx(k,{size:16}),e.jsx("span",{children:"Shifokor Paneli"})]}),e.jsxs("button",{onClick:()=>{u(),n(!1)},className:"text-red-600 hover:text-red-700 transition-all duration-300 font-medium py-2 px-3 rounded-lg hover:bg-red-50 text-left w-full flex items-center space-x-2",children:[e.jsx(C,{size:16}),e.jsx("span",{children:r("logout")})]})]}):e.jsxs("div",{className:"pt-3 theme-border border-t flex flex-col space-y-2",children:[e.jsx(t,{to:"/login",className:"theme-text hover:theme-accent transition-all duration-300 font-medium py-2 px-3 rounded-lg hover:theme-bg-tertiary text-sm",onClick:()=>n(!1),children:r("login")}),e.jsx(t,{to:"/register",className:"text-white bg-[#62B6CB] px-4 py-2 rounded-lg transition-all duration-300 font-medium text-center shadow-sm hover:opacity-90 text-sm",onClick:()=>n(!1),children:r("register")})]})]})})]})})},I=()=>{const{t:s}=$(),n=new Date().getFullYear();return e.jsx("footer",{className:"theme-bg-secondary theme-border border-t",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("img",{src:"/logo.png",alt:"Revmohelp Logo",className:"w-8 h-8 rounded-lg object-cover"}),e.jsx("span",{className:"text-lg font-bold theme-text",children:"Revmohelp"})]}),e.jsx("p",{className:"theme-text-secondary text-sm leading-relaxed",children:s("heroSubtitle")}),e.jsxs("div",{className:"space-y-2 text-sm theme-text-secondary",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{size:14}),e.jsx("span",{children:"revmohelp@gmail.com"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{size:14}),e.jsx("span",{children:"+998 (93) 200 10 22"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{size:14}),e.jsx("span",{children:"Toshkent, O'zbekiston"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold theme-text uppercase tracking-wider",children:s("footerQuickLinks")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{to:"/",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("home")}),e.jsx(t,{to:"/posts",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("posts")}),e.jsx(t,{to:"/doctors",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("doctors")}),e.jsx(t,{to:"/qa",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("qa")}),e.jsx(t,{to:"/patient-stories",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("patientStories")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold theme-text uppercase tracking-wider",children:s("footerLegal")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{to:"/privacy",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("privacyPolicy")}),e.jsx(t,{to:"/data-security",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("dataSecurity")}),e.jsx(t,{to:"/terms",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("termsOfUse")}),e.jsx(t,{to:"/faq",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("faq")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold theme-text uppercase tracking-wider",children:s("footerContact")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{to:"/about",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("aboutUs")}),e.jsx(t,{to:"/contact",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("contact")}),e.jsx(t,{to:"/partnership",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:s("partnership")}),e.jsx(t,{to:"/consultation",className:"block theme-text-secondary hover:theme-accent transition-colors duration-200 text-sm",children:"A'zosi Bo'ling"})]})]})]}),e.jsxs("div",{className:"theme-border border-t mt-8 pt-6 flex flex-col sm:flex-row justify-between items-center",children:[e.jsxs("p",{className:"theme-text-muted text-sm",children:["Â© ",n," Revmohelp. ",s("allRightsReserved"),"."]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 sm:mt-0",children:[e.jsx("span",{className:"theme-text-muted text-sm",children:s("developedBy")}),e.jsx("a",{href:"https://torexdev.uz/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 text-sm hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200",children:"torexdev.uz"})]})]})]})})},J=()=>e.jsxs("div",{className:"min-h-screen theme-bg flex flex-col",children:[e.jsx(F,{}),e.jsx("main",{className:"flex-1",children:e.jsx(A,{})}),e.jsx(I,{})]});export{J as default};
