import{m as N,r as u,j as e,F as R,X as M,u as L,x as $,k as U,y as B,v as H,z as V,B as z}from"./index-BLJsMvxT.js";import{I as A}from"./image-BNEUy3Hs.js";import{V as O}from"./video-BoQwYvsc.js";import{U as Y}from"./upload-8R9VAxzC.js";import{P as I}from"./plus-DE2nvxC4.js";import{A as Q}from"./arrow-left-BQ97qgJv.js";import{E as K}from"./eye-CGZ2FPCT.js";import{S as C}from"./save-B3aZFzp_.js";import{C as X}from"./check-circle-DLzRG-NL.js";import{A as G}from"./alert-circle-Ch-X4D41.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=N("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=N("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=N("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=N("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=N("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=N("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=N("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),se=({formData:s,onInputChange:c,onFormDataChange:i})=>{const[d,b]=u.useState("uz"),[j,v]=u.useState(null),k=r=>{const n=r.target.files?.[0];if(n){if(n.size>5*1024*1024){alert("Rasm hajmi 5MB dan kichik bo'lishi kerak");return}c("featured_image",n);const g=new FileReader;g.onload=()=>v(g.result),g.readAsDataURL(n)}},o=()=>{c("featured_image",void 0),v(null)},p=r=>{const n=document.getElementById(`content-editor-${d}`);if(!n)return;const g=n.selectionStart,w=n.selectionEnd,y=n.value.substring(g,w);let m="";switch(r){case"bold":m=`**${y||"qalin matn"}**`;break;case"italic":m=`*${y||"qiya matn"}*`;break;case"h1":m=`# ${y||"Sarlavha 1"}`;break;case"h2":m=`## ${y||"Sarlavha 2"}`;break;case"h3":m=`### ${y||"Sarlavha 3"}`;break;case"ul":m=`- ${y||"Ro'yxat elementi"}`;break;case"ol":m=`1. ${y||"Raqamlangan ro'yxat"}`;break}const h=d==="uz"?s.content:s.translations[d].content,a=h.substring(0,g)+m+h.substring(w);d==="uz"?c("content",a):i(x=>({...x,translations:{...x.translations,[d]:{...x.translations[d],content:a}}})),setTimeout(()=>{n.focus(),n.setSelectionRange(g+m.length,g+m.length)},0)};return e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-3",children:"Maqola Sarlavhasi"}),e.jsx("input",{type:"text",placeholder:"Maqola sarlavhasini kiriting",value:s.title,onChange:r=>c("title",r.target.value),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text text-lg font-medium"})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-4",children:"Maqola Turi"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{type:"text",icon:R,label:"Matn Maqolasi"},{type:"image",icon:A,label:"Rasm Maqolasi"},{type:"video",icon:O,label:"Video Maqolasi"}].map(({type:r,icon:n,label:g})=>e.jsxs("button",{onClick:()=>c("post_type",r),className:`p-4 border-2 rounded-lg transition-all duration-200 ${s.post_type===r?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"theme-border hover:border-gray-300 dark:hover:border-gray-500 theme-text-secondary"}`,children:[e.jsx(n,{size:24,className:"mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-medium",children:g})]},r))})]}),(s.post_type==="image"||s.post_type==="video")&&e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6 animate-fade-in",children:[s.post_type==="image"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-4",children:"Asosiy Rasm"}),j?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:j,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),e.jsx("button",{onClick:o,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200",children:e.jsx(M,{size:16})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 theme-border border-dashed rounded-lg cursor-pointer theme-bg-tertiary hover:theme-bg-quaternary transition-colors duration-200",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Y,{className:"w-8 h-8 mb-4 theme-text-muted"}),e.jsxs("p",{className:"mb-2 text-sm theme-text-secondary",children:[e.jsx("span",{className:"font-semibold",children:"Yuklash uchun bosing"})," yoki sudrab tashlang"]}),e.jsx("p",{className:"text-xs theme-text-muted",children:"PNG, JPG, WEBP (max 5MB)"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:k})]})]}),s.post_type==="video"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:"YouTube Video URL"}),e.jsx("input",{type:"url",placeholder:"https://www.youtube.com/watch?v=...",value:s.youtube_url||"",onChange:r=>c("youtube_url",r.target.value),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text"})]})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 space-y-4 lg:space-y-0",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary",children:"Maqola Matni"}),e.jsx("div",{className:"flex space-x-1 bg-gray-50 rounded-lg p-1 overflow-x-auto",children:[{code:"uz",label:"O'zbek",flag:"ðŸ‡ºðŸ‡¿",bgClass:"bg-nav-500",textClass:"text-white"},{code:"ru",label:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º",bgClass:"bg-primary-500",textClass:"text-white"},{code:"en",label:"English",flag:"ðŸ‡ºðŸ‡¸",bgClass:"bg-highlight-500",textClass:"text-gray-800"}].map(r=>e.jsxs("button",{type:"button",onClick:()=>b(r.code),className:`px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 flex items-center space-x-2 whitespace-nowrap ${d===r.code?r.bgClass+" "+r.textClass+" shadow-sm":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{children:r.flag}),e.jsx("span",{className:"hidden sm:inline",children:r.label})]},r.code))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1 lg:gap-2 mb-4 p-3 theme-bg-tertiary rounded-lg overflow-x-auto",children:[e.jsx("button",{type:"button",onClick:()=>p("bold"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Qalin",children:e.jsx(F,{size:16})}),e.jsx("button",{type:"button",onClick:()=>p("italic"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Qiya",children:e.jsx(D,{size:16})}),e.jsx("div",{className:"w-px h-6 theme-border"}),e.jsx("button",{type:"button",onClick:()=>p("h1"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Sarlavha 1",children:e.jsx(J,{size:16})}),e.jsx("button",{type:"button",onClick:()=>p("h2"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Sarlavha 2",children:e.jsx(W,{size:16})}),e.jsx("button",{type:"button",onClick:()=>p("h3"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Sarlavha 3",children:e.jsx(Z,{size:16})}),e.jsx("div",{className:"w-px h-6 theme-border"}),e.jsx("button",{type:"button",onClick:()=>p("ul"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Ro'yxat",children:e.jsx(te,{size:16})}),e.jsx("button",{type:"button",onClick:()=>p("ol"),className:"p-2 theme-text-secondary hover:theme-text hover:theme-bg-quaternary rounded transition-colors duration-200 flex-shrink-0",title:"Raqamlangan ro'yxat",children:e.jsx(ee,{size:16})})]}),d==="uz"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Maqola sarlavhasi (O'zbek)",value:s.title,onChange:r=>c("title",r.target.value),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text font-semibold"}),e.jsx("textarea",{id:"content-editor-uz",rows:12,placeholder:"Tibbiy maqola matnini shu yerga yozing... (O'zbek tilida)",value:s.content,onChange:r=>c("content",r.target.value),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text resize-vertical"}),e.jsxs("div",{className:"text-sm theme-text-muted",children:[s.content.length," belgi"]})]}),d==="ru"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÑ‚Ð°Ñ‚ÑŒÐ¸ (Ð ÑƒÑÑÐºÐ¸Ð¹)",value:s.translations.ru.title,onChange:r=>i(n=>({...n,translations:{...n.translations,ru:{...n.translations.ru,title:r.target.value}}})),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text font-semibold"}),e.jsx("textarea",{id:"content-editor-ru",rows:12,placeholder:"Ð¢ÐµÐºÑÑ‚ Ð¼ÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¾Ð¹ ÑÑ‚Ð°Ñ‚ÑŒÐ¸... (Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼ ÑÐ·Ñ‹ÐºÐµ)",value:s.translations.ru.content,onChange:r=>i(n=>({...n,translations:{...n.translations,ru:{...n.translations.ru,content:r.target.value}}})),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text resize-vertical"}),e.jsxs("div",{className:"text-sm theme-text-muted",children:[s.translations.ru.content.length," ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"]})]}),d==="en"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Article title (English)",value:s.translations.en.title,onChange:r=>i(n=>({...n,translations:{...n.translations,en:{...n.translations.en,title:r.target.value}}})),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text font-semibold"}),e.jsx("textarea",{id:"content-editor-en",rows:12,placeholder:"Medical article content... (in English)",value:s.translations.en.content,onChange:r=>i(n=>({...n,translations:{...n.translations,en:{...n.translations.en,content:r.target.value}}})),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text resize-vertical"}),e.jsxs("div",{className:"text-sm theme-text-muted",children:[s.translations.en.content.length," characters"]})]})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsxs("label",{className:"block text-sm font-medium theme-text-secondary mb-4",children:["Qisqacha Mazmun (",d==="uz"?"O'zbek":d==="ru"?"Ð ÑƒÑÑÐºÐ¸Ð¹":"English",")"]}),d==="uz"&&e.jsx("textarea",{rows:3,placeholder:"Maqolaning qisqacha mazmuni (avtomatik yaratiladi)",value:s.excerpt,onChange:r=>c("excerpt",r.target.value),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text resize-none"}),d==="ru"&&e.jsx("textarea",{rows:3,placeholder:"ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑŒÐ¸",value:s.translations.ru.excerpt,onChange:r=>i(n=>({...n,translations:{...n.translations,ru:{...n.translations.ru,excerpt:r.target.value}}})),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text resize-none"}),d==="en"&&e.jsx("textarea",{rows:3,placeholder:"Article excerpt",value:s.translations.en.excerpt,onChange:r=>i(n=>({...n,translations:{...n.translations,en:{...n.translations.en,excerpt:r.target.value}}})),className:"w-full px-4 py-3 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text resize-none"})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("h3",{className:"text-lg font-semibold theme-text mb-4",children:"Tarjima Holati"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ‡ºðŸ‡¿"}),e.jsx("div",{className:"text-sm font-medium color-nav-500",children:"O'zbek"}),e.jsx("div",{className:`text-xs mt-1 ${s.title&&s.content?"text-green-600":"theme-text-muted"}`,children:s.title&&s.content?"Tayyor":"To'ldirilmagan"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ‡·ðŸ‡º"}),e.jsx("div",{className:"text-sm font-medium color-primary-500",children:"Ð ÑƒÑÑÐºÐ¸Ð¹"}),e.jsx("div",{className:`text-xs mt-1 ${s.translations.ru.title&&s.translations.ru.content?"text-green-600":"theme-text-muted"}`,children:s.translations.ru.title&&s.translations.ru.content?"Ð“Ð¾Ñ‚Ð¾Ð²Ð¾":"ÐÐµ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ‡ºðŸ‡¸"}),e.jsx("div",{className:"text-sm font-medium color-highlight-500",children:"English"}),e.jsx("div",{className:`text-xs mt-1 ${s.translations.en.title&&s.translations.en.content?"text-green-600":"theme-text-muted"}`,children:s.translations.en.title&&s.translations.en.content?"Ready":"Not filled"})]})]})]})]})},ae=({formData:s,categories:c,onInputChange:i,onFormDataChange:d})=>{const[b,j]=u.useState(""),v=()=>{b.trim()&&!s.tags.includes(b.trim())&&(i("tags",[...s.tags,b.trim()]),j(""))},k=o=>{i("tags",s.tags.filter(p=>p!==o))};return e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("h3",{className:"text-lg font-semibold theme-text mb-4",children:"Nashr Sozlamalari"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:s.published,onChange:o=>i("published",o.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("span",{className:"text-sm font-medium theme-text-secondary",children:"Darhol nashr etish"})]})})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-3",children:"Kategoriya"}),e.jsxs("select",{value:s.category_id,onChange:o=>i("category_id",o.target.value),className:"w-full px-3 py-2 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text",children:[e.jsx("option",{value:"",children:"Kategoriya tanlang"}),c.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-3",children:"Teglar"}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("input",{type:"text",placeholder:"Teg qo'shish",value:b,onChange:o=>j(o.target.value),onKeyPress:o=>o.key==="Enter"&&(o.preventDefault(),v()),className:"flex-1 px-3 py-2 theme-border border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-gray-50 theme-text min-w-0"}),e.jsx("button",{type:"button",onClick:v,className:"px-3 py-2 theme-accent-bg text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex-shrink-0",children:e.jsx(I,{size:16})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(o=>e.jsxs("span",{className:"inline-flex items-center space-x-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm rounded-full animate-fade-in",children:[e.jsx("span",{className:"truncate max-w-20",children:o}),e.jsx("button",{type:"button",onClick:()=>k(o),className:"theme-accent hover:text-blue-800 dark:hover:text-blue-200 flex-shrink-0",children:e.jsx(M,{size:12})})]},o))})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:[e.jsx("h3",{className:"text-lg font-semibold theme-text mb-4",children:"Tarjima Yordamchisi"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"button",onClick:()=>{s.title&&!s.translations.ru.title&&d(o=>({...o,translations:{...o.translations,ru:{...o.translations.ru,title:`[RU] ${s.title}`,content:`[Ð ÑƒÑÑÐºÐ¸Ð¹ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´]

${s.content}`,excerpt:`[RU] ${s.excerpt}`,slug:s.slug+"-ru"}}}))},className:"w-full text-left p-3 theme-bg-tertiary rounded-lg hover:theme-bg-quaternary transition-colors duration-200 text-sm",children:"ðŸ‡·ðŸ‡º Rus tiliga shablon yaratish"}),e.jsx("button",{type:"button",onClick:()=>{s.title&&!s.translations.en.title&&d(o=>({...o,translations:{...o.translations,en:{...o.translations.en,title:`[EN] ${s.title}`,content:`[English translation]

${s.content}`,excerpt:`[EN] ${s.excerpt}`,slug:s.slug+"-en"}}}))},className:"w-full text-left p-3 theme-bg-tertiary rounded-lg hover:theme-bg-quaternary transition-colors duration-200 text-sm",children:"ðŸ‡ºðŸ‡¸ Ingliz tiliga shablon yaratish"})]})]})]})},re=({isEditing:s,isSubmitting:c,onBack:i,onPreview:d,onSaveDraft:b,onPublish:j,canPreview:v})=>e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:i,className:"p-2 theme-text-secondary hover:theme-text rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(Q,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold theme-text",children:s?"Maqolani Tahrirlash":"Yangi Maqola Yaratish"}),e.jsx("p",{className:"theme-text-secondary text-sm lg:text-base",children:s?"Mavjud maqolani tahrirlang":"Yangi tibbiy maqola yoki kontent qo'shing"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:gap-3",children:[e.jsxs("button",{onClick:d,disabled:!v,className:"flex items-center space-x-2 theme-border border theme-text-secondary px-3 lg:px-4 py-2 rounded-lg hover:theme-bg-tertiary transition-colors duration-200 disabled:opacity-50 text-sm lg:text-base",children:[e.jsx(K,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Ko'rish"})]}),e.jsxs("button",{onClick:b,disabled:c,className:"flex items-center space-x-2 bg-gray-600 text-white px-3 lg:px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200 disabled:opacity-50 text-sm lg:text-base",children:[e.jsx(C,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Qoralama"})]}),e.jsxs("button",{onClick:j,disabled:c,className:"flex items-center space-x-2 theme-accent-bg text-white px-3 lg:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 text-sm lg:text-base",children:[e.jsx(C,{size:16}),e.jsx("span",{children:c?"Saqlanmoqda...":"Nashr etish"})]})]})]}),ge=()=>{const s=L(),{id:c}=$(),i=!!c,[d,b]=u.useState([]),[j,v]=u.useState("uz"),[k,o]=u.useState(""),[p,r]=u.useState(null),[n,g]=u.useState(!1),[w,y]=u.useState(i),[m,h]=u.useState({type:"",text:""}),[a,x]=u.useState({title:"",slug:"",meta_title:"",meta_description:"",category_id:"",tags:[],post_type:"text",content:"",excerpt:"",published:!1,translations:{ru:{title:"",content:"",excerpt:"",meta_title:"",meta_description:"",slug:""},en:{title:"",content:"",excerpt:"",meta_title:"",meta_description:"",slug:""}}});u.useEffect(()=>{S(),i&&E()},[i,c]);const S=async()=>{try{const{data:t}=await U();t&&b(t)}catch(t){console.error("Error loading categories:",t)}},E=async()=>{if(c){y(!0);try{const{data:t}=await B(c,"uz");t&&(x({title:t.title,slug:t.slug,meta_title:t.meta_title||"",meta_description:t.meta_description||"",category_id:t.category_id||"",tags:t.tags||[],post_type:t.youtube_url?"video":t.featured_image_url?"image":"text",youtube_url:t.youtube_url||"",content:t.content,excerpt:t.excerpt,published:t.published,translations:{ru:(()=>{const l=t.translations?.find(f=>f.language==="ru");return l?{title:l.title||"",content:l.content||"",excerpt:l.excerpt||"",meta_title:l.meta_title||"",meta_description:l.meta_description||"",slug:l.slug||""}:{title:"",content:"",excerpt:"",meta_title:"",meta_description:"",slug:""}})(),en:(()=>{const l=t.translations?.find(f=>f.language==="en");return l?{title:l.title||"",content:l.content||"",excerpt:l.excerpt||"",meta_title:l.meta_title||"",meta_description:l.meta_description||"",slug:l.slug||""}:{title:"",content:"",excerpt:"",meta_title:"",meta_description:"",slug:""}})()}}),t.featured_image_url&&r(t.featured_image_url))}catch(t){console.error("Error loading post:",t),h({type:"error",text:"Maqolani yuklashda xatolik yuz berdi"})}finally{y(!1)}}};u.useEffect(()=>{if(a.title&&!i){const t=a.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();x(l=>({...l,slug:t}))}},[a.title,i]),u.useEffect(()=>{if(a.content&&!a.excerpt){const t=a.content.replace(/[#*`]/g,"").substring(0,200).trim()+"...";x(l=>({...l,excerpt:t}))}},[a.content]),u.useEffect(()=>{a.title&&x(t=>({...t,meta_title:a.title}))},[a.title]),u.useEffect(()=>{a.excerpt&&x(t=>({...t,meta_description:a.excerpt}))},[a.excerpt]),u.useEffect(()=>{a.translations.ru.title&&x(t=>({...t,translations:{...t.translations,ru:{...t.translations.ru,meta_title:a.translations.ru.title}}}))},[a.translations.ru.title]),u.useEffect(()=>{a.translations.ru.excerpt&&x(t=>({...t,translations:{...t.translations,ru:{...t.translations.ru,meta_description:a.translations.ru.excerpt}}}))},[a.translations.ru.excerpt]),u.useEffect(()=>{a.translations.en.title&&x(t=>({...t,translations:{...t.translations,en:{...t.translations.en,meta_title:a.translations.en.title}}}))},[a.translations.en.title]),u.useEffect(()=>{a.translations.en.excerpt&&x(t=>({...t,translations:{...t.translations,en:{...t.translations.en,meta_description:a.translations.en.excerpt}}}))},[a.translations.en.excerpt]),u.useEffect(()=>{if(a.translations.ru.title&&!i){const t=a.translations.ru.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();x(l=>({...l,translations:{...l.translations,ru:{...l.translations.ru,slug:t}}}))}},[a.translations.ru.title,i]),u.useEffect(()=>{if(a.translations.en.title&&!i){const t=a.translations.en.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();x(l=>({...l,translations:{...l.translations,en:{...l.translations.en,slug:t}}}))}},[a.translations.en.title,i]);const _=(t,l)=>{x(f=>({...f,[t]:l})),m.text&&h({type:"",text:""})},T=async()=>{if(!a.title.trim())return h({type:"error",text:"Sarlavha kiritilishi shart"}),!1;if(!a.content.trim())return h({type:"error",text:"Maqola matni kiritilishi shart"}),!1;if(!a.category_id)return h({type:"error",text:"Kategoriya tanlanishi shart"}),!1;if(a.post_type==="video"&&!a.youtube_url)return h({type:"error",text:"Video turi uchun YouTube URL kiritilishi shart"}),!1;const{isUnique:t}=await z(a.slug,"uz",i?c:void 0);if(!t)return h({type:"error",text:"Bu URL (slug) allaqachon mavjud. Boshqa sarlavha yozing yoki URL ni o'zgartiring."}),!1;if(a.translations.ru.slug){const{isUnique:l}=await z(a.translations.ru.slug,"ru",i?c:void 0);if(!l)return h({type:"error",text:"Rus tilidagi URL (slug) allaqachon mavjud."}),!1}if(a.translations.en.slug){const{isUnique:l}=await z(a.translations.en.slug,"en",i?c:void 0);if(!l)return h({type:"error",text:"Ingliz tilidagi URL (slug) allaqachon mavjud."}),!1}return!0},q=async(t=!1)=>{if(await T()){g(!0),h({type:"",text:""});try{const l={...a,published:!t,meta_title:a.meta_title||a.title,meta_description:a.meta_description||a.excerpt};let f;i?f=await H({id:c,...l}):f=await V(l),f.error?h({type:"error",text:"Xatolik: "+f.error.message}):(h({type:"success",text:i?"Maqola muvaffaqiyatli yangilandi!":t?"Qoralama saqlandi!":"Maqola nashr etildi!"}),setTimeout(()=>{s("/admin/posts")},1500))}catch{h({type:"error",text:"Xatolik yuz berdi. Qaytadan urinib ko'ring."})}finally{g(!1)}}},P=()=>{a.slug&&window.open(`/posts/${a.slug}`,"_blank")};return w?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[e.jsx(re,{isEditing:i,isSubmitting:n,onBack:()=>s("/admin/posts"),onPreview:P,onSaveDraft:()=>q(!0),onPublish:()=>q(!1),canPreview:!!a.slug}),m.text&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center space-x-2 animate-slide-down ${m.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[m.type==="success"?e.jsx(X,{size:20,className:"text-green-600 dark:text-green-400"}):e.jsx(G,{size:20,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:m.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300",children:m.text})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4 lg:gap-6",children:[e.jsx("div",{className:"xl:col-span-3 space-y-4 lg:space-y-6 min-w-0",children:e.jsx(se,{formData:a,onInputChange:_,onFormDataChange:x})}),e.jsx("div",{className:"xl:col-span-1 space-y-4 lg:space-y-6",children:e.jsx(ae,{formData:a,categories:d,onInputChange:_,onFormDataChange:x})})]})]})};export{ge as default};
