import{m as be,c as re,r as l,k as ae,j as e,X as J,n as fe,o as ye,p as je,q as ve,i as Ne,F as ee,L as q,t as R,U as we,G as ke,v as Ce,w as Se}from"./index-Z4L9-lCG.js";import{g as Pe,a as ze,b as Ee}from"./postHelpers-Bmdn3pm0.js";import{C as Q}from"./check-circle-DJqXdf__.js";import{A as X}from"./alert-circle-CdBNdKG8.js";import{T as Z}from"./tag-Bt7A3aIJ.js";import{S as Le}from"./square-pen-CPxkNImL.js";import{T as le}from"./trash-2-PiHk2pnV.js";import{P as Y}from"./plus-BHSJqwky.js";import{S as te}from"./search-Bw7LNGH_.js";import{P as De}from"./play-FRFDAPDu.js";import{C as Be}from"./calendar-92JDbxfr.js";import{E as se}from"./eye--hYI9hvJ.js";import{C as Te}from"./clock-CUBqhNFg.js";import{B as $e}from"./ban-oStCJkqO.js";import{C as Ae}from"./credit-card-BAh1xXHM.js";import{T as Me}from"./trending-up-BuQGPdDY.js";import"./video-wHFqyHjI.js";import"./image-8jStGaz_.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=be("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),_e=({onCategoriesChange:s,triggerCreateModal:j,onModalClosed:B})=>{const{t:a}=re(),[G,F]=l.useState([]),[I,T]=l.useState(!0),[U,p]=l.useState(!1),[V,E]=l.useState(!1),[v,k]=l.useState(null),[C,h]=l.useState(!1),[L,S]=l.useState(null),[c,o]=l.useState({type:"",text:""}),[n,b]=l.useState({name:"",slug:"",description:"",color:"#62B6CB"}),$=["#62B6CB","#5FA8D3","#1B4965","#BEE9E8","#CAE9FF","#62B6CB","#1B4965","#BEE9E8","#5FA8D3","#CAE9FF","#62B6CB","#1B4965"];l.useEffect(()=>{P()},[]),l.useEffect(()=>{j&&(p(!0),B?.())},[j,B]);const P=async()=>{T(!0);try{const{data:r}=await ae();r&&F(r)}catch{o({type:"error",text:a("categoriesLoadingError")})}finally{T(!1)}},f=r=>{const{name:m,value:i}=r.target;b(_=>({..._,[m]:i})),c.text&&o({type:"",text:""})};l.useEffect(()=>{if(n.name&&!v){const r=n.name.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();b(m=>({...m,slug:r}))}},[n.name,v]);const z=()=>{b({name:"",slug:"",description:"",color:"#62B6CB"}),k(null)},D=r=>{b({name:r.name,slug:r.slug,description:r.description||"",color:r.color}),k(r),E(!0)},N=()=>{p(!1),E(!1),z(),o({type:"",text:""})},A=async()=>{if(!n.name.trim())return o({type:"error",text:a("categoryNameRequired")}),!1;if(!n.slug.trim())return o({type:"error",text:a("categorySlugRequired")}),!1;const{isUnique:r}=await ve(n.slug,v?.id);return r?!0:(o({type:"error",text:a("categorySlugExists")}),!1)},M=async r=>{if(r.preventDefault(),!!await A()){h(!0),o({type:"",text:""});try{const{data:m,error:i}=await ye(n);i?o({type:"error",text:a("categoriesErrorOccurred")+": "+i.message}):(o({type:"success",text:a("categoryCreated")}),await P(),s?.(),setTimeout(()=>{N()},1500))}catch{o({type:"error",text:a("categoriesErrorOccurred")})}finally{h(!1)}}},y=async r=>{if(r.preventDefault(),!(!v||!await A())){h(!0),o({type:"",text:""});try{const{data:m,error:i}=await je({id:v.id,...n});i?o({type:"error",text:a("categoriesErrorOccurred")+": "+i.message}):(o({type:"success",text:a("categoryUpdated")}),await P(),s?.(),setTimeout(()=>{N()},1500))}catch{o({type:"error",text:a("categoriesErrorOccurred")})}finally{h(!1)}}},O=async(r,m)=>{if(confirm(a("confirmDeleteCategory",{categoryName:m}))){S(r),o({type:"",text:""});try{const{error:i}=await fe(r);i?o({type:"error",text:i.message}):(o({type:"success",text:a("categoryDeleted")}),await P(),s?.())}catch{o({type:"error",text:a("categoriesErrorOccurred")})}finally{S(null)}}};return I?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"theme-text-muted text-sm",children:a("categoriesLoading")})]})}):e.jsxs("div",{className:"space-y-6",children:[c.text&&e.jsxs("div",{className:`p-3 rounded-lg flex items-center space-x-2 animate-slide-down ${c.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[c.type==="success"?e.jsx(Q,{size:16,className:"text-green-600 dark:text-green-400"}):e.jsx(X,{size:16,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:`text-sm ${c.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:c.text})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(r=>e.jsxs("div",{className:"theme-bg rounded-xl theme-shadow hover:theme-shadow-lg transition-all duration-300 theme-border border p-4 group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:r.color},children:e.jsx(Z,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold theme-text",children:r.name}),e.jsxs("p",{className:"text-xs theme-text-muted",children:["/",r.slug]})]})]}),e.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>D(r),className:"p-1 theme-accent hover:text-blue-800 dark:hover:text-blue-300 rounded",title:a("editCategory"),children:e.jsx(Le,{size:14})}),e.jsx("button",{onClick:()=>O(r.id,r.name),disabled:L===r.id,className:"p-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 rounded disabled:opacity-50",title:a("deleteCategory"),children:L===r.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}):e.jsx(le,{size:14})})]})]}),r.description&&e.jsx("p",{className:"theme-text-secondary text-sm line-clamp-2",children:r.description})]},r.id))}),U&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"theme-bg rounded-2xl theme-shadow-lg theme-border border p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold theme-text",children:a("newCategoryModal")}),e.jsx("button",{onClick:N,className:"theme-text-secondary hover:theme-text p-1 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(J,{size:20})})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.text&&e.jsxs("div",{className:`p-3 rounded-lg flex items-center space-x-2 ${c.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[c.type==="success"?e.jsx(Q,{size:16,className:"text-green-600 dark:text-green-400"}):e.jsx(X,{size:16,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:`text-sm ${c.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:c.text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:a("categoryNameLabel")}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:f,required:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200",placeholder:a("categoryNamePlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:a("descriptionLabel")}),e.jsx("textarea",{name:"description",value:n.description,onChange:f,rows:2,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 resize-none",placeholder:a("descriptionPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:a("colorLabel")}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:$.map(r=>e.jsx("button",{type:"button",onClick:()=>b(m=>({...m,color:r})),className:`w-8 h-8 rounded-lg border-2 transition-all duration-200 ${n.color===r?"border-gray-400 scale-110":"border-gray-200 hover:scale-105"}`,style:{backgroundColor:r}},r))}),e.jsx("input",{type:"color",name:"color",value:n.color,onChange:f,className:"w-full h-10 rounded-lg border theme-border cursor-pointer"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 theme-border border theme-text-secondary px-4 py-2 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:a("cancelButton")}),e.jsx("button",{type:"submit",disabled:C,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50",children:a(C?"creatingCategory":"createCategory")})]})]})]})}),V&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"theme-bg rounded-2xl theme-shadow-lg theme-border border p-6 max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold theme-text",children:a("editCategoryModal")}),e.jsx("button",{onClick:N,className:"theme-text-secondary hover:theme-text p-1 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:e.jsx(J,{size:20})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.text&&e.jsxs("div",{className:`p-3 rounded-lg flex items-center space-x-2 ${c.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[c.type==="success"?e.jsx(Q,{size:16,className:"text-green-600 dark:text-green-400"}):e.jsx(X,{size:16,className:"text-red-600 dark:text-red-400"}),e.jsx("span",{className:`text-sm ${c.type==="success"?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:c.text})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:a("categoryNameLabel")}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:f,required:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:a("descriptionLabel")}),e.jsx("textarea",{name:"description",value:n.description,onChange:f,rows:2,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium theme-text-secondary mb-2",children:a("colorLabel")}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:$.map(r=>e.jsx("button",{type:"button",onClick:()=>b(m=>({...m,color:r})),className:`w-8 h-8 rounded-lg border-2 transition-all duration-200 ${n.color===r?"border-gray-400 scale-110":"border-gray-200 hover:scale-105"}`,style:{backgroundColor:r}},r))}),e.jsx("input",{type:"color",name:"color",value:n.color,onChange:f,className:"w-full h-10 rounded-lg border theme-border cursor-pointer"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 theme-border border theme-text-secondary px-4 py-2 rounded-lg hover:theme-bg-tertiary transition-colors duration-200",children:a("cancelButton")}),e.jsx("button",{type:"submit",disabled:C,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50",children:a(C?"savingCategory":"saveCategory")})]})]})]})})]})},rt=()=>{const{t:s}=re(),[j,B]=l.useState([]),[a,G]=l.useState([]),[F,I]=l.useState([]),[T,U]=l.useState(!0),[p,V]=l.useState("posts"),[E,v]=l.useState(""),[k,C]=l.useState("all"),[h,L]=l.useState("all"),[S,c]=l.useState("all"),[o,n]=l.useState("all"),[b,$]=l.useState(null),[P,f]=l.useState(null),[z,D]=l.useState({type:"",text:""}),[N,A]=l.useState(!1),[M,y]=l.useState(!1),[O,r]=l.useState(!1),[m,i]=l.useState(!1),[_,w]=l.useState(!1);l.useEffect(()=>{W()},[]),l.useEffect(()=>{const t=()=>{y(!1),r(!1),i(!1),w(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]);const W=async()=>{U(!0);try{const[t,d]=await Promise.all([Ne(),ae()]);if(t.data){B(t.data);const x=t.data.filter(u=>u.author).reduce((u,g)=>(g.author&&!u.find(K=>K.id===g.author.id)&&u.push(g.author),u),[]);I(x)}d.data&&G(d.data)}catch(t){console.error("Error loading data:",t)}finally{U(!1)}},oe=()=>{W()},ne=[{id:"posts",label:s("articlesTab"),icon:ee},{id:"categories",label:s("categoriesTab"),icon:Z}],ie=s(p==="posts"?"postsManagementTitle":"categoriesManagementTitle"),de=s(p==="posts"?"postsManagementDesc":"categoriesManagementDesc"),ce=async t=>{if(confirm(s("confirmDeletePost"))){$(t);try{const{error:d}=await Se(t);d?alert(s("postsErrorOccurred")+": "+d.message):B(x=>x.filter(u=>u.id!==t))}catch{alert(s("postsErrorOccurred"))}finally{$(null)}}},xe=async(t,d,x)=>{const u=s(x?"confirmUnblockPost":"confirmBlockPost");if(confirm(`"${d}" ${u}`)){f(t),D({type:"",text:""});try{const{error:g}=await Ce({id:t,published:x});g?D({type:"error",text:g.message}):(D({type:"success",text:s(x?"postUnblocked":"postBlocked")}),await W())}catch{D({type:"error",text:s("postsErrorOccurred")})}finally{f(null)}}},H=j.filter(t=>{const d=t.title.toLowerCase().includes(E.toLowerCase())||t.excerpt.toLowerCase().includes(E.toLowerCase()),x=k==="all"||t.category_id===k,u=S==="all"||t.author_id===S,g=h==="all"||h==="published"&&t.published||h==="draft"&&!t.published,K=o==="all"||o==="blocked"&&!t.published||o==="active"&&t.published;return d&&x&&u&&g&&K}),me=t=>new Date(t).toLocaleDateString("uz-UZ",{year:"numeric",month:"short",day:"numeric"}),ue=()=>{if(k==="all")return s("allCategories");const t=a.find(d=>d.id===k);return t?t.name:s("allCategories")},he=()=>{if(S==="all")return s("allAuthors");const t=F.find(d=>d.id===S);return t?`${t.full_name} (${t.role==="doctor"?s("postDoctorRole"):s("postAdminRole")})`:s("allAuthors")},ge=()=>s(h==="all"?"allStatuses":h==="published"?"publishedStatus":h==="draft"?"draftStatus":"allStatuses"),pe=()=>s(o==="all"?"allPosts":o==="active"?"activePosts":o==="blocked"?"blockedPosts":"allPosts");return T?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 lg:space-y-6 xl:space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold theme-text",children:ie}),e.jsx("p",{className:"theme-text-secondary text-sm lg:text-base",children:de})]}),e.jsx("div",{className:"flex justify-center flex-1",children:e.jsx("div",{className:"inline-flex rounded-lg theme-bg-secondary p-1",children:ne.map(t=>{const d=t.icon;return e.jsxs("button",{onClick:()=>V(t.id),className:`flex items-center space-x-2 px-4 lg:px-6 py-2 lg:py-3 font-semibold transition-all duration-200 whitespace-nowrap rounded-md text-sm ${p===t.id?"theme-accent-bg text-white shadow-sm":"theme-text-secondary hover:theme-accent"}`,children:[e.jsx(d,{size:16}),e.jsx("span",{children:t.label})]},t.id)})})}),e.jsxs("div",{children:[p==="posts"&&e.jsxs(q,{to:"/admin/posts/create",className:"flex items-center space-x-2 theme-accent-bg text-white px-3 lg:px-4 py-2 lg:py-2.5 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(Y,{size:18}),e.jsx("span",{children:s("newArticle")})]}),p==="categories"&&e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 theme-accent-bg text-white px-3 lg:px-4 py-2 lg:py-2.5 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(Y,{size:18}),e.jsx("span",{children:s("newCategory")})]})]})]}),z.text&&e.jsxs("div",{className:`p-4 rounded-xl flex items-center space-x-2 animate-slide-down max-w-md mx-auto ${z.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[z.type==="success"?e.jsx(Q,{size:20,className:"text-green-600"}):e.jsx(X,{size:20,className:"text-red-600"}),e.jsx("span",{className:z.type==="success"?"text-green-700":"text-red-700",children:z.text})]})]}),e.jsxs("div",{className:"mt-6",children:[p==="categories"&&e.jsx(_e,{onCategoriesChange:oe,triggerCreateModal:N,onModalClosed:()=>A(!1)}),p==="posts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4",children:[e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold theme-text",children:j.length}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:s("totalPosts")})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-green-600",children:j.filter(t=>t.published).length}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:s("publishedPosts")})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:j.filter(t=>!t.published).length}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:s("draftPosts")})]}),e.jsxs("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4",children:[e.jsx("div",{className:"text-xl lg:text-2xl font-bold text-blue-600",children:j.reduce((t,d)=>t+(d.views_count||0),0).toLocaleString()}),e.jsx("div",{className:"text-xs lg:text-sm theme-text-secondary",children:s("totalViews")})]})]}),e.jsx("div",{className:"theme-bg rounded-lg theme-shadow theme-border border p-4 lg:p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 theme-text-muted",size:18}),e.jsx("input",{type:"text",placeholder:s("searchPosts"),value:E,onChange:t=>v(t.target.value),className:"w-full pl-10 pr-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm"})]})}),e.jsxs("div",{className:"lg:w-48 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),r(!1),i(!1),w(!1),y(!M)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:ue()}),e.jsx(R,{className:`theme-text-muted transition-transform ${M?"rotate-180":""}`,size:16})]}),M&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:[e.jsx("div",{onClick:()=>{C("all"),y(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("allCategories")}),a.map(t=>e.jsx("div",{onClick:()=>{C(t.id),y(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:t.name},t.id))]})]}),e.jsxs("div",{className:"lg:w-56 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),y(!1),i(!1),w(!1),r(!O)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:he()}),e.jsx(R,{className:`theme-text-muted transition-transform ${O?"rotate-180":""}`,size:16})]}),O&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:[e.jsx("div",{onClick:()=>{c("all"),r(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("allAuthors")}),F.map(t=>e.jsxs("div",{onClick:()=>{c(t.id),r(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:[t.full_name," (",t.role==="doctor"?s("postDoctorRole"):s("postAdminRole"),")"]},t.id))]})]}),e.jsxs("div",{className:"lg:w-48 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),y(!1),r(!1),w(!1),i(!m)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:ge()}),e.jsx(R,{className:`theme-text-muted transition-transform ${m?"rotate-180":""}`,size:16})]}),m&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[e.jsx("div",{onClick:()=>{L("all"),i(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("allStatuses")}),e.jsx("div",{onClick:()=>{L("published"),i(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("publishedStatus")}),e.jsx("div",{onClick:()=>{L("draft"),i(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("draftStatus")})]})]}),e.jsxs("div",{className:"lg:w-48 relative",children:[e.jsxs("button",{onClick:t=>{t.stopPropagation(),y(!1),r(!1),i(!1),w(!_)},className:"w-full px-3 lg:px-4 py-2 lg:py-3 bg-gray-50 border border-gray-200 rounded-lg focus:border-blue-500 transition-all duration-200 theme-text text-sm text-left flex items-center justify-between",children:[e.jsx("span",{children:pe()}),e.jsx(R,{className:`theme-text-muted transition-transform ${_?"rotate-180":""}`,size:16})]}),_&&e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[e.jsx("div",{onClick:()=>{n("all"),w(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("allPosts")}),e.jsx("div",{onClick:()=>{n("active"),w(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("activePosts")}),e.jsx("div",{onClick:()=>{n("blocked"),w(!1)},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer theme-text",children:s("blockedPosts")})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:H.map(t=>{const d=Pe(t),x=!t.published;return e.jsxs("div",{className:`theme-bg rounded-2xl theme-shadow-lg theme-border border overflow-hidden hover:theme-shadow-xl transition-all duration-300 transform hover:-translate-y-2 group ${x?"opacity-75 border-red-300 dark:border-red-600":""}`,children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.featured_image_url?e.jsx("img",{src:t.featured_image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):t.youtube_url?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:`https://img.youtube.com/vi/${t.youtube_url.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/maxresdefault.jpg`,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",loading:"lazy",onError:u=>{const g=u.target;g.src=`https://img.youtube.com/vi/${t.youtube_url.split("v=")[1]?.split("&")[0]||"dQw4w9WgXcQ"}/hqdefault.jpg`}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center group-hover:bg-opacity-50 transition-all duration-300",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-xl animate-pulse group-hover:scale-110 transition-transform duration-300",children:e.jsx(De,{size:24,className:"text-white ml-1"})})})]}):e.jsx("div",{className:"w-full h-full theme-bg-tertiary flex items-center justify-center group-hover:theme-bg-quaternary transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(d,{size:48,className:"theme-text-muted mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsx("p",{className:"theme-text-muted text-sm font-medium",children:s("textArticle")})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2",children:t.category&&e.jsx("span",{className:"px-3 py-1 text-xs font-semibold text-white rounded-full shadow-lg backdrop-blur-sm",style:{backgroundColor:t.category.color},children:t.category.name})}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${Ee(t)}`,children:ze(t)}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${x?"bg-red-500 text-white":t.published?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:s(x?"blockedStatus":"activeStatus")})]})]}),e.jsxs("div",{className:"p-4 lg:p-5",children:[e.jsx("h3",{className:"text-lg font-bold theme-text mb-3 line-clamp-2 group-hover:theme-accent transition-colors duration-300",children:t.title}),e.jsx("p",{className:"theme-text-secondary text-sm mb-4 line-clamp-3 leading-relaxed",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-xs theme-text-muted mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(we,{size:12}),e.jsxs("span",{className:"truncate max-w-28 font-medium",children:[t.author?.full_name,t.author?.role==="doctor"&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded font-bold",children:s("doctorAbbr")}),t.author?.role==="admin"&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded font-bold",children:s("postAdminRole")})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Be,{size:12}),e.jsx("span",{children:me(t.created_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(se,{size:12}),e.jsx("span",{className:"theme-accent font-medium",children:(t.views_count||0).toLocaleString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[t.tags.slice(0,2).map(u=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs rounded-full font-medium",children:["#",u]},u)),t.tags.length>2&&e.jsxs("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full font-medium",children:["+",t.tags.length-2]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs theme-text-muted mb-4 p-3 theme-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ke,{size:10}),e.jsxs("span",{children:[s("seoTitle")," ",t.meta_title?s("seoYes"):s("seoNo")]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Z,{size:10}),e.jsxs("span",{className:"truncate max-w-24",children:["/",t.slug]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Te,{size:10}),e.jsxs("span",{children:[Math.ceil(t.content.length/1e3)," ",s("minutesLabel")]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t theme-border",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>xe(t.id,t.title,x),disabled:P===t.id,className:`flex items-center space-x-1 p-2 rounded-lg transition-all duration-200 transform hover:scale-105 ${x?"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20":"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20"} disabled:opacity-50 disabled:transform-none`,title:s(x?"unblockAndPublish":"blockPostAction"),children:P===t.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current"}):e.jsxs(e.Fragment,{children:[x?e.jsx(Oe,{size:14}):e.jsx($e,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:s(x?"activatePost":"blockPost")})]})}),e.jsxs(q,{to:`/admin/posts/edit/${t.id}`,className:"flex items-center space-x-1 theme-accent hover:text-blue-800 dark:hover:text-blue-300 p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900 transition-all duration-200 transform hover:scale-105",title:s("editPost"),children:[e.jsx(Ae,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:s("editPost")})]}),e.jsxs(q,{to:`/posts/${t.slug}`,target:"_blank",className:"flex items-center space-x-1 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900 transition-all duration-200 transform hover:scale-105",title:s("viewPost"),children:[e.jsx(se,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:s("viewPost")})]}),e.jsx("button",{onClick:()=>ce(t.id),disabled:b===t.id,className:"flex items-center space-x-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:transform-none",title:s("deletePost"),children:b===t.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:14}),e.jsx("span",{className:"text-xs font-medium hidden lg:inline",children:s("deletePost")})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs theme-text-muted",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Me,{size:10}),e.jsxs("span",{children:[t.tags.length," ",s("tagsLabel")]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ee,{size:10}),e.jsxs("span",{children:[t.content.length>1e3?"1K+":t.content.length," ",s("charactersLabel")]})]})]})]})]})]},t.id)})}),H.length===0&&!T&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"theme-text-muted mb-4",children:e.jsx(te,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"text-xl font-semibold theme-text-secondary mb-2",children:s("noPostsFound")}),e.jsx("p",{className:"theme-text-muted mb-6",children:s("changeSearchOrCreate")}),e.jsxs(q,{to:"/admin/posts/create",className:"inline-flex items-center space-x-2 theme-accent-bg text-white px-4 lg:px-6 py-2 lg:py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(Y,{size:18}),e.jsx("span",{children:s("createFirstPost")})]})]})]})]})]})};export{rt as default};
